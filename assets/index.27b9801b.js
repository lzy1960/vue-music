import{d as e,a as t,r as a,s as l,w as s,b as n,o,c as r,e as i,u as c,f as u,g as d,t as p,F as v,h as g,n as m,i as h,p as y,j as f,k as S,l as I,m as _,q as b,v as k,x as P,y as w,E as T,z as C,A as L,B as x,C as U,D as V,G as E,T as A,H as D,I as j,J as M,K as q,L as N}from"./vendor.b4a3d6d4.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const O=e("main",{state:()=>({isGlobalShow:!1,isPlaying:!1,isLogin:!1,curSongId:0,curSongTitle:"",curSongAuthor:"",curSongUrl:"",curSongPicUrl:"",changeTime:0,curTime:0,totalTime:0,volume:.1,muted:!1,lyric:[{lyric:"",time:"",duration:0}],rotateAngle:0,playlist:[],curPlaylistIndex:0}),getters:{},actions:{setSongId(e){this.curSongId=e},setIsPlaying(e){this.isPlaying=e},setChangeTime(e){this.changeTime=e},setTotalTime(e){this.totalTime=e},setCurTime(e){this.curTime=e},setSongUrl(e){this.curSongUrl=e},setVolume(e){this.volume=e},setLyric(e){this.lyric=e},setMuted(e){this.muted=e},setPlaylist(e){~this.playlist.findIndex((t=>t.id===e.id))||(this.curPlaylistIndex=this.playlist.length,this.playlist.push(e))},previousSong(){this.curPlaylistIndex--,this.setSongId(this.playlist[this.curPlaylistIndex].id)},nextSong(){this.curPlaylistIndex++,this.setSongId(this.playlist[this.curPlaylistIndex].id)}}});function G(e){let t=parseInt(e),a=0,l=0;t>60&&(a=parseInt((t/60).toString()),t=parseInt((t%60).toString()),a>60&&(l=parseInt((a/60).toString()),a=60));let s="";return s=parseInt(t.toString())<10?"0:0"+parseInt(t.toString()):"0:"+parseInt(t.toString()),a>0&&(s=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),s=parseInt(a.toString())+":"+s),l>0&&(s=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),s=parseInt(l.toString())+":"+parseInt(a.toString())+":"+s),s}var R=(e,t)=>{const a=e.__vccOpts||e;for(const[l,s]of t)a[l]=s;return a};const $={class:"progress"};var K=R(t({setup(e){const t=O(),c=a("00:00"),u=a("00:00"),{curTime:d,totalTime:p}=l(t),v=a(0);s(d,(()=>{c.value=G(d.value+""),u.value=G(p.value+""),v.value=d.value/p.value*100}));const g=()=>{t.setChangeTime(p.value*(.01*v.value))},m=e=>G(p.value*(.01*e)+"");return(e,t)=>{const a=n("el-slider");return o(),r("div",$,[i(a,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),onChange:g,"format-tooltip":m},null,8,["modelValue"])])}}}),[["__scopeId","data-v-dd282e38"]]);const z={class:"current-play"},H={class:"right"},B={class:"title"},F={class:"author"};var J=R(t({setup(e){const t=O(),{curSongPicUrl:a,curSongTitle:s,curSongAuthor:v}=l(t);return(e,t)=>{const l=n("el-image"),g=n("el-tooltip");return o(),r("div",z,[i(l,{src:c(a)},null,8,["src"]),u("div",H,[i(g,{content:c(s),placement:"right"},{default:d((()=>[u("div",B,p(c(s)),1)])),_:1},8,["content"]),i(g,{content:c(v),placement:"right"},{default:d((()=>[u("div",F,p(c(v)),1)])),_:1},8,["content"])])])}}}),[["__scopeId","data-v-679fb0ab"]]);const W={class:"global-playlist"},Q={key:0},X=["onClick"],Y={class:"title"},Z={class:"author"},ee=(e=>(y("data-v-2258d355"),e=e(),f(),e))((()=>u("i",{class:"iconfont icon-24gf-playlistMusic2"},null,-1)));var te=R(t({setup(e){const t=O(),{playlist:a,curSongId:s}=l(t);return(e,l)=>{const y=n("el-empty"),f=n("el-button"),S=n("el-popover");return o(),r("div",W,[i(S,{placement:"top",width:200,trigger:"click",teleported:!1},{reference:d((()=>[i(f,{type:"text"},{icon:d((()=>[ee])),_:1})])),default:d((()=>[c(a).length?(o(),r("div",Q,[(o(!0),r(v,null,g(c(a),(e=>(o(),r("div",{class:m(["playlist-item",{playing:c(s)===e.id}]),onClick:a=>c(t).setSongId(e.id)},[u("div",Y,p(e.name),1),u("div",Z,p(e.author),1)],10,X)))),256))])):(o(),h(y,{key:1}))])),_:1})])}}}),[["__scopeId","data-v-2258d355"]]);const ae=e=>(y("data-v-4d8300c7"),e=e(),f(),e),le={class:"bottom-toolbox"},se={class:"wrapper"},ne={class:"center-control"},oe={class:"time-progress"},re=ae((()=>u("span",{class:"iconfont icon-24gf-previous"},null,-1))),ie=ae((()=>u("span",{class:"iconfont icon-24gf-next"},null,-1))),ce={class:"volume"};var ue=R(t({setup(e){const t=O(),{curTime:s,totalTime:v,volume:g,isGlobalShow:h,isPlaying:y,muted:f,curPlaylistIndex:_,playlist:b}=l(t),k=S((()=>G(s.value+""))),P=S((()=>G(v.value+""))),w=()=>{h.value=!h.value},T=()=>{y.value=!y.value},C=a(0);C.value=100*g.value;const L=()=>{t.setVolume(C.value/100)};return(e,a)=>{const l=n("el-button"),s=n("el-link"),v=n("el-slider");return o(),r("div",le,[i(K),u("div",se,[i(J),u("div",ne,[u("div",oe,p(c(k))+" / "+p(c(P)),1),i(l,{type:"text",onClick:c(t).previousSong,disabled:!c(_)},{icon:d((()=>[re])),_:1},8,["onClick","disabled"]),i(l,{class:"play-button",type:"primary",circle:"",onClick:T},{icon:d((()=>[u("span",{class:m(["iconfont",c(t).isPlaying?"icon-24gf-pause2":"icon-24gf-play"])},null,2)])),_:1}),i(l,{type:"text",onClick:c(t).nextSong,disabled:c(_)>=c(b).length-1},{icon:d((()=>[ie])),_:1},8,["onClick","disabled"]),i(s,{onClick:w},{default:d((()=>[I(p(c(h)?"收起":"展开"),1)])),_:1})]),u("div",ce,[u("i",{class:m(["iconfont",C.value&&!c(f)?"icon-24gf-volumeMiddle":"icon-24gf-volumeDisable"]),onClick:a[0]||(a[0]=e=>c(t).setMuted(!c(f)))},null,2),i(v,{modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value=e),onInput:L},null,8,["modelValue"])]),i(te)])])}}}),[["__scopeId","data-v-4d8300c7"]]);const de=_.create({baseURL:"https://netease-cloud-music-api-dun-nu.vercel.app",timeout:2e4});de.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.token=t),e}),(e=>Promise.reject(e))),de.interceptors.response.use((e=>(e.data.code,e)),(e=>Promise.reject(e)));const pe=async e=>{const{data:t}=await de.request(e);return t};var ve={getTopPlaylist:e=>pe({url:"/top/playlist",method:"get",params:e}),searchSong:e=>pe({url:"/search",method:"get",params:e}),getSearchDefault:e=>pe({url:"/search/default",method:"get",params:e}),searchSuggest:e=>pe({url:"/search/suggest",method:"get",params:e}),searchUrl:e=>pe({url:"/song/url",method:"get",params:e}),getSongDetail:e=>pe({url:"/song/detail",method:"get",params:e}),getLyric:e=>pe({url:"/lyric",method:"get",params:e}),getPlaylist:e=>pe({url:"/playlist/detail",method:"get",params:e})};const ge={class:"search"},me=["onClick"];var he=R(t({setup(e){var t,s;const v=b(),g=a(""),m=a(""),h=a("");g.value=(null==(s=null==(t=v.query)?void 0:t.keywords)?void 0:s.toString())||"";const y=k();(async()=>{const e=await ve.getSearchDefault({});200===e.code?(m.value=e.data.showKeyword,h.value=e.data.realkeyword):T.error(e.message)})();const f=async(e,t)=>{if(!e)return void t([]);const a={keywords:e},l=await ve.searchSuggest(a);200===l.code?t(l.result.songs):T.error(l.message)},S=O(),{isGlobalShow:I}=l(S),_=e=>{I.value=!1,e?(g.value||(g.value=e),y.push({name:"searchList",query:{keywords:e}})):T.warning("无搜索内容")};return(e,t)=>{const a=n("el-autocomplete"),l=n("el-col"),s=n("el-button"),v=n("el-row");return o(),r("div",ge,[i(v,null,{default:d((()=>[i(l,{span:22},{default:d((()=>[i(a,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),placeholder:m.value,"fetch-suggestions":f,onKeyup:t[1]||(t[1]=P((e=>_(g.value||h.value)),["enter"]))},{default:d((({item:e})=>[u("div",{onClick:t=>{var a;(a=e.id)?y.push({name:"songInfo",params:{id:a}}):T.warning("无内容")}},p(e.name),9,me)])),_:1},8,["modelValue","placeholder"])])),_:1}),i(l,{span:2},{default:d((()=>[i(s,{icon:c(w),circle:"",onClick:t[2]||(t[2]=e=>_(g.value||h.value))},null,8,["icon"])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-37b581d3"]]);const ye=(e=>(y("data-v-04468cca"),e=e(),f(),e))((()=>u("span",{class:"logo"},"SIM MUSIC",-1)));var fe=R(t({setup(e){const t=O(),{isGlobalShow:a}=l(t),s=()=>{},r=()=>{},p=k(),v=()=>{a.value=!1,p.push({name:"home"})};return(e,a)=>{const l=n("el-button"),p=n("el-col"),g=n("el-avatar"),m=n("el-dropdown-item"),y=n("el-dropdown-menu"),f=n("el-dropdown"),S=n("el-header");return o(),h(S,null,{default:d((()=>[i(p,{span:8},{default:d((()=>[i(l,{onClick:v,type:"text",style:{color:"#fff"}},{default:d((()=>[ye])),_:1})])),_:1}),i(p,{span:8},{default:d((()=>[i(he)])),_:1}),i(p,{style:{"text-align":"right"},span:8},{default:d((()=>[c(t).isLogin?(o(),h(f,{key:1},{dropdown:d((()=>[i(y,null,{default:d((()=>[i(m,null,{default:d((()=>[u("span",{onClick:r},"退出登录")])),_:1})])),_:1})])),default:d((()=>[i(g,{size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"})])),_:1})):(o(),h(g,{key:0,onClick:s,size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}))])),_:1})])),_:1})}}}),[["__scopeId","data-v-04468cca"]]);const Se={class:"lyric-area"};var Ie=R(t({setup(e){const t=O(),{curSongId:n,curTime:i,isPlaying:d}=l(t);let h=a([]);const y=a(),f=a();C((()=>{var e;null==(e=f.value)||e.scrollIntoView()}));const S=async e=>{const a={id:e},l=await ve.getLyric(a);200===l.code?(h.value=l.lrc.lyric.split("\n").filter((e=>e)).map((e=>{const t=e.match(/^\[(.*)\:(.*)\.(.*)\]/);return{lyric:e.replace(/\[.*\]/,""),time:e.match(/\[(.*)\]/)&&e.match(/\[(.*)\]/)[1]||"",duration:t?60*Number(t[1])+1*Number(t[2])+.001*Number(t[3]):0}})),t.setLyric(h.value)):T.error(l.message)},I=a(0);s(i,(()=>{I.value=h.value.filter((e=>e.duration<i.value)).length-1})),s(d,(()=>{var e;d.value&&(null==(e=f.value)||e.scrollIntoView({block:"center",behavior:"smooth"}))})),L((()=>{var e;null==(e=f.value)||e.scrollIntoView({block:"center",behavior:"smooth"})})),C((()=>{var e;null==(e=y.value)||e.addEventListener})),n.value&&S(n.value);return s(n,(()=>{S(n.value)})),(e,t)=>(o(),r("div",Se,[u("div",{ref_key:"lyricRef",ref:y,class:"lyric"},[(o(!0),r(v,null,g(c(h),((e,t)=>(o(),r("p",{ref_for:!0,ref:e=>{I.value===t&&(f.value=e)},class:m({current:I.value===t})},p(e.lyric.replace(/\[.*\]/,"")),3)))),256))],512)]))}}),[["__scopeId","data-v-f85e8492"]]);const _e={class:"sim-audio"},be=["src"],ke=t({setup(e){const t=O(),{curSongId:n,curSongTitle:i,curSongAuthor:d,curSongUrl:p,isPlaying:v,changeTime:g,volume:m,muted:h,curSongPicUrl:y,curPlaylistIndex:f,playlist:S}=l(t),I=a();s(v,(()=>{x((()=>{v.value?I.value.play():I.value.pause()}))})),s(h,(()=>{I.value.muted=h.value})),s(m,(()=>(t.setMuted(!1),I.value.volume=m.value))),C((()=>{I.value.volume=m.value})),s(g,(()=>{I.value.currentTime=g.value})),L((()=>{})),s(n,(async()=>{localStorage.setItem("curSongId",n.value+"");const e=await b(n.value);if(e)t.setSongUrl(e);else{const e=`https://music.163.com/song/media/outer/url?id=${n.value}.mp3`;t.setSongUrl(e)}_()}));const _=async()=>{const e={ids:n.value},t=await ve.getSongDetail(e);if(200===t.code){const e=t.songs[0];k(e)}else T.error(t.message)},b=async e=>{var t;const a={id:n.value},l=await ve.searchUrl(a);if(200===l.code)return(null==(t=l.data[0])?void 0:t.url)||"";T.error(l.message)},k=async e=>{i.value=e.name,d.value=e.ar[0].name,y.value=e.al.picUrl,t.setPlaylist({id:n.value,name:i.value,author:d.value}),t.setIsPlaying(!1),x((()=>{t.setIsPlaying(!0)}))};t.setSongId(Number(localStorage.getItem("curSongId")));const P=()=>{t.setIsPlaying(!1)},w=()=>{t.setTotalTime(I.value.duration)},U=()=>{},V=()=>{t.setCurTime(I.value.currentTime)};return(e,t)=>(o(),r("div",_e,[u("audio",{ref:e=>{I.value=e},src:c(p),onCanplay:w,onEnded:U,onTimeupdate:V,onEmptied:P},null,40,be)]))}});const Pe={class:"global-player"},we={class:"info"},Te={class:"left"},Ce={class:"circle"},Le={class:"song-info"},xe={class:"title"},Ue={class:"author"},Ve={class:"right"};var Ee=R(t({setup(e){const t=O(),{curSongTitle:a,curSongAuthor:s,curSongPicUrl:d}=l(t);return(e,t)=>{const l=n("el-image");return o(),r("div",Pe,[u("div",{class:"background",style:U({backgroundImage:`url(${c(d)})`})},null,4),i(ke),u("div",we,[u("div",Te,[u("div",Ce,[i(l,{src:c(d)},null,8,["src"])]),u("div",Le,[u("p",xe,p(c(a)),1),u("p",Ue,p(c(s)),1)])]),u("div",Ve,[i(Ie)])])])}}}),[["__scopeId","data-v-f420c4dc"]]);var Ae=R(t({setup(e){const t=O();return(e,a)=>{const l=n("router-view"),s=n("el-main"),u=n("el-footer"),p=n("el-container");return o(),r(v,null,[i(p,null,{default:d((()=>[i(fe),i(s,null,{default:d((()=>[i(l)])),_:1}),i(u,null,{default:d((()=>[i(ue)])),_:1})])),_:1}),i(A,{name:"move"},{default:d((()=>[V(i(Ee,null,null,512),[[E,c(t).isGlobalShow]])])),_:1})],64)}}}),[["__scopeId","data-v-7a465a26"]]);const De={},je=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in De)return;De[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const l=document.createElement("link");return l.rel=t?"stylesheet":"modulepreload",t||(l.as="script",l.crossOrigin=""),l.href=e,document.head.appendChild(l),t?new Promise(((t,a)=>{l.addEventListener("load",t),l.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()},Me=[{name:"home",path:"/",component:()=>je((()=>import("./Home.30b090b5.js")),["assets/Home.30b090b5.js","assets/Home.7fb5d163.css","assets/vendor.b4a3d6d4.js"])},{name:"searchList",path:"/searchList",component:()=>je((()=>import("./SearchList.ad56904f.js")),["assets/SearchList.ad56904f.js","assets/SearchList.dde51a43.css","assets/vendor.b4a3d6d4.js"])},{name:"songInfo",path:"/songInfo/:id",component:()=>je((()=>import("./SongInfo.c3873071.js")),["assets/SongInfo.c3873071.js","assets/SongInfo.888fbf59.css","assets/vendor.b4a3d6d4.js"])},{name:"playlist",path:"/playlist/:id",component:()=>je((()=>import("./Playlist.8412b05f.js")),["assets/Playlist.8412b05f.js","assets/Playlist.30c1b258.css","assets/vendor.b4a3d6d4.js"])}],qe=D({history:j(),routes:Me});M(Ae).use(q).use(N()).use(qe).mount("#app");export{R as _,ve as s,O as u};
