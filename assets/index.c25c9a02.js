import{d as ae,a as k,r as T,s as A,w as E,b as m,o as f,c as I,e as r,u,f as d,t as P,g,F as j,h as Z,n as K,i as z,p as ee,j as te,k as Q,l as oe,m as re,q as ce,v as se,x as ie,y as ue,E as R,z as H,A as ne,B as X,C as _e,D as de,G as pe,T as ge,H as me,I as ve,J as he,K as fe,L as ye}from"./vendor.b4a3d6d4.js";const Se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};Se();const C=ae("main",{state:()=>({isGlobalShow:!1,isPlaying:!1,isLogin:!1,curSongId:0,curSongTitle:"",curSongAuthor:"",curSongUrl:"",curSongPicUrl:"",changeTime:0,curTime:0,totalTime:0,volume:.1,muted:!1,lyric:[{lyric:"",time:"",duration:0}],rotateAngle:0,playlist:[],curPlaylistIndex:0}),getters:{},actions:{setSongId(e){this.curSongId=e},setIsPlaying(e){this.isPlaying=e},setChangeTime(e){this.changeTime=e},setTotalTime(e){this.totalTime=e},setCurTime(e){this.curTime=e},setSongUrl(e){this.curSongUrl=e},setVolume(e){this.volume=e},setLyric(e){this.lyric=e},setMuted(e){this.muted=e},setPlaylist(e){~this.playlist.findIndex(s=>s.id===e.id)||(this.curPlaylistIndex=this.playlist.length,this.playlist.push(e))},previousSong(){this.curPlaylistIndex--,this.setSongId(this.playlist[this.curPlaylistIndex].id)},nextSong(){this.curPlaylistIndex++,this.setSongId(this.playlist[this.curPlaylistIndex].id)}}});function q(e){let t=parseInt(e),s=0,l=0;t>60&&(s=parseInt((t/60).toString()),t=parseInt((t%60).toString()),s>60&&(l=parseInt((s/60).toString()),s=60));let o="";return parseInt(t.toString())<10?o="0:0"+parseInt(t.toString()):o="0:"+parseInt(t.toString()),s>0&&(parseInt(t.toString())<10?o="0"+parseInt(t.toString()):o=parseInt(t.toString()).toString(),o=parseInt(s.toString())+":"+o),l>0&&(parseInt(t.toString())<10?o="0"+parseInt(t.toString()):o=parseInt(t.toString()).toString(),o=parseInt(l.toString())+":"+parseInt(s.toString())+":"+o),o}var U=(e,t)=>{const s=e.__vccOpts||e;for(const[l,o]of t)s[l]=o;return s};const Ie={class:"progress"},be=k({setup(e){const t=C(),s=T("00:00"),l=T("00:00"),{curTime:o,totalTime:n}=A(t),i=T(0);E(o,()=>{s.value=q(o.value+""),l.value=q(n.value+""),i.value=o.value/n.value*100});const p=()=>{t.setChangeTime(n.value*(i.value*.01))},h=v=>q(n.value*(v*.01)+"");return(v,y)=>{const _=m("el-slider");return f(),I("div",Ie,[r(_,{modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=b=>i.value=b),onChange:p,"format-tooltip":h},null,8,["modelValue"])])}}});var Te=U(be,[["__scopeId","data-v-dd282e38"]]);const xe={class:"current-play"},Pe={class:"right"},we={class:"title"},$e={class:"author"},ke=k({setup(e){const t=C(),{curSongPicUrl:s,curSongTitle:l,curSongAuthor:o}=A(t);return(n,i)=>{const p=m("el-image");return f(),I("div",xe,[r(p,{src:u(s)},null,8,["src"]),d("div",Pe,[d("div",we,P(u(l)),1),d("div",$e,P(u(o)),1)])])}}});var Ce=U(ke,[["__scopeId","data-v-93dfd6fe"]]);const Le=e=>(ee("data-v-c439c642"),e=e(),te(),e),Ee={class:"global-playlist"},De={key:0},Ve=["onClick"],Ae={class:"title"},Ue={class:"author"},Be=Le(()=>d("i",{class:"iconfont icon-24gf-playlistMusic2"},null,-1)),Fe=k({setup(e){const t=C(),{playlist:s,curSongId:l}=A(t);return(o,n)=>{const i=m("el-empty"),p=m("el-button"),h=m("el-popover");return f(),I("div",Ee,[r(h,{placement:"top",width:200,trigger:"click",teleported:!1},{reference:g(()=>[r(p,{type:"text"},{icon:g(()=>[Be]),_:1})]),default:g(()=>[u(s).length?(f(),I("div",De,[(f(!0),I(j,null,Z(u(s),v=>(f(),I("div",{class:K(["playlist-item",{playing:u(l)===v.id}]),onClick:y=>u(t).setSongId(v.id)},[d("div",Ae,P(v.name),1),d("div",Ue,P(v.author),1)],10,Ve))),256))])):(f(),z(i,{key:1}))]),_:1})])}}});var Re=U(Fe,[["__scopeId","data-v-c439c642"]]);const le=e=>(ee("data-v-df9b2406"),e=e(),te(),e),qe={class:"bottom-toolbox"},Ne={class:"wrapper"},Oe={class:"center-control"},Ge={class:"time-progress"},Me=le(()=>d("span",{class:"iconfont icon-24gf-previous"},null,-1)),ze=le(()=>d("span",{class:"iconfont icon-24gf-next"},null,-1)),Ke={class:"volume"},He=k({setup(e){const t=C(),{curTime:s,totalTime:l,volume:o,isGlobalShow:n,isPlaying:i,muted:p,curPlaylistIndex:h,playlist:v}=A(t),y=Q(()=>q(s.value+"")),_=Q(()=>q(l.value+"")),b=()=>{console.log("\u663E\u793A"),n.value=!n.value},a=()=>{i.value=!i.value},c=T(0);c.value=o.value*100;const S=()=>{t.setVolume(c.value/100)};return(w,D)=>{const F=m("el-button"),$=m("el-link"),O=m("el-slider");return f(),I("div",qe,[r(Te),d("div",Ne,[r(Ce),d("div",Oe,[d("div",Ge,P(u(y))+" / "+P(u(_)),1),r(F,{type:"text",onClick:u(t).previousSong,disabled:!u(h)},{icon:g(()=>[Me]),_:1},8,["onClick","disabled"]),r(F,{class:"play-button",type:"primary",circle:"",onClick:a},{icon:g(()=>[d("span",{class:K(["iconfont",u(t).isPlaying?"icon-24gf-pause2":"icon-24gf-play"])},null,2)]),_:1}),r(F,{type:"text",onClick:u(t).nextSong,disabled:u(h)>=u(v).length-1},{icon:g(()=>[ze]),_:1},8,["onClick","disabled"]),r($,{onClick:b},{default:g(()=>[oe(P(u(n)?"\u6536\u8D77":"\u5C55\u5F00"),1)]),_:1})]),d("div",Ke,[d("i",{class:K(["iconfont",c.value&&!u(p)?"icon-24gf-volumeMiddle":"icon-24gf-volumeDisable"]),onClick:D[0]||(D[0]=G=>u(t).setMuted(!u(p)))},null,2),r(O,{modelValue:c.value,"onUpdate:modelValue":D[1]||(D[1]=G=>c.value=G),onInput:S},null,8,["modelValue"])]),r(Re)])])}}});var je=U(He,[["__scopeId","data-v-df9b2406"]]);const W=re.create({baseURL:"/api",timeout:2e4});W.interceptors.request.use(e=>{const t=localStorage.getItem("token");return console.log(t),t&&(console.log("\u8BF7\u6C42\u5934\u4E0D\u4E3A\u7A7A"),console.log(e),e.headers.token=t),e},e=>Promise.reject(e));W.interceptors.response.use(e=>(e.data.code,e),e=>Promise.reject(e));const B=async e=>{const{data:t}=await W.request(e);return console.log(t),t},We=e=>B({url:"/top/playlist",method:"get",params:e}),Je=e=>B({url:"/search",method:"get",params:e}),Qe=e=>B({url:"/search/default",method:"get",params:e}),Xe=e=>B({url:"/search/suggest",method:"get",params:e}),Ye=e=>B({url:"/song/url",method:"get",params:e}),Ze=e=>B({url:"/song/detail",method:"get",params:e}),et=e=>B({url:"/lyric",method:"get",params:e}),tt=e=>B({url:"/playlist/detail",method:"get",params:e});var N={getTopPlaylist:We,searchSong:Je,getSearchDefault:Qe,searchSuggest:Xe,searchUrl:Ye,getSongDetail:Ze,getLyric:et,getPlaylist:tt};const ot={class:"search"},st=["onClick"],nt=k({setup(e){var b;const t=ce(),s=T(""),l=T(""),o=T("");s.value=(b=t.query)==null?void 0:b.keywords.toString();const n=se();(async()=>{const a={},c=await N.getSearchDefault(a);c.code===200?(console.log(c.data),l.value=c.data.showKeyword,o.value=c.data.realkeyword):R.error(c.message)})();const p=async(a,c)=>{if(!a){c([]);return}const S={keywords:a},w=await N.searchSuggest(S);w.code===200?(console.log(w.result),c(w.result.songs)):R.error(w.message)},h=C(),{isGlobalShow:v}=A(h),y=a=>{if(v.value=!1,console.log("\u641C\u7D22name",a),!a){R.warning("\u65E0\u641C\u7D22\u5185\u5BB9");return}s.value||(s.value=a),n.push({name:"searchList",query:{keywords:a}})},_=a=>{if(console.log("\u641C\u7D22id",a),!a){R.warning("\u65E0\u5185\u5BB9");return}n.push({name:"songInfo",params:{id:a}})};return(a,c)=>{const S=m("el-autocomplete"),w=m("el-col"),D=m("el-button"),F=m("el-row");return f(),I("div",ot,[r(F,null,{default:g(()=>[r(w,{span:22},{default:g(()=>[r(S,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=$=>s.value=$),placeholder:l.value,"fetch-suggestions":p,onKeyup:c[1]||(c[1]=ie($=>y(s.value||o.value),["enter"]))},{default:g(({item:$})=>[d("div",{onClick:O=>_($.id)},P($.name),9,st)]),_:1},8,["modelValue","placeholder"])]),_:1}),r(w,{span:2},{default:g(()=>[r(D,{icon:u(ue),circle:"",onClick:c[2]||(c[2]=$=>y(s.value||o.value))},null,8,["icon"])]),_:1})]),_:1})])}}});var lt=U(nt,[["__scopeId","data-v-9231efde"]]);const at=oe("\u8FD9\u662F\u5934\u90E8"),rt=k({setup(e){const t=C(),s=()=>{console.log("\u767B\u5F55")},l=()=>{console.log("\u9000\u51FA\u767B\u5F55")},o=se(),n=()=>{o.push({name:"home"})};return(i,p)=>{const h=m("el-button"),v=m("el-col"),y=m("el-avatar"),_=m("el-dropdown-item"),b=m("el-dropdown-menu"),a=m("el-dropdown"),c=m("el-header");return f(),z(c,null,{default:g(()=>[r(v,{span:8},{default:g(()=>[r(h,{onClick:n,type:"text",style:{color:"#fff"}},{default:g(()=>[at]),_:1})]),_:1}),r(v,{span:8},{default:g(()=>[r(lt)]),_:1}),r(v,{style:{"text-align":"right"},span:8},{default:g(()=>[u(t).isLogin?(f(),z(a,{key:1},{dropdown:g(()=>[r(b,null,{default:g(()=>[r(_,null,{default:g(()=>[d("span",{onClick:l},"\u9000\u51FA\u767B\u5F55")]),_:1})]),_:1})]),default:g(()=>[r(y,{size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"})]),_:1})):(f(),z(y,{key:0,onClick:s,size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}))]),_:1})]),_:1})}}});const ct={class:"lyric-area"},it=k({setup(e){const t=C(),{curSongId:s,curTime:l,isPlaying:o}=A(t);let n=T([]);const i=T(),p=T();H(()=>{var _;(_=p.value)==null||_.scrollIntoView()});const h=async _=>{const b={id:_},a=await N.getLyric(b);a.code===200?(console.log(a),n.value=a.lrc.lyric.split(`
`).filter(c=>c).map(c=>{const S=c.match(/^\[(.*)\:(.*)\.(.*)\]/);return{lyric:c.replace(/\[.*\]/,""),time:c.match(/\[(.*)\]/)&&c.match(/\[(.*)\]/)[1]||"",duration:S?Number(S[1])*60+Number(S[2])*1+Number(S[3])*.001:0}}),t.setLyric(n.value)):R.error(a.message)},v=T(0);E(l,()=>{v.value=n.value.filter(_=>_.duration<l.value).length-1,console.log(v.value)}),E(o,()=>{var _;o.value&&((_=p.value)==null||_.scrollIntoView({block:"center",behavior:"smooth"}))}),ne(()=>{var _;(_=p.value)==null||_.scrollIntoView({block:"center",behavior:"smooth"})}),H(()=>{var _;(_=i.value)==null||_.addEventListener}),s.value&&h(s.value);const y=_=>_.replace(/\[.*\]/,"");return E(s,()=>{h(s.value)}),(_,b)=>(f(),I("div",ct,[d("div",{ref_key:"lyricRef",ref:i,class:"lyric"},[(f(!0),I(j,null,Z(u(n),(a,c)=>(f(),I("p",{ref_for:!0,ref:S=>{v.value===c&&(p.value=S)},class:K({current:v.value===c})},P(y(a.lyric)),3))),256))],512)]))}});var ut=U(it,[["__scopeId","data-v-153e7d5d"]]);const _t={class:"sim-audio"},dt=["src"],pt=k({setup(e){const t=C(),{curSongId:s,curSongTitle:l,curSongAuthor:o,curSongUrl:n,isPlaying:i,changeTime:p,volume:h,muted:v,curSongPicUrl:y,curPlaylistIndex:_,playlist:b}=A(t),a=T(),c=()=>{console.log(a.value),i.value?a.value.play():a.value.pause(),console.log("\u6B63\u5728\u64AD\u653E\u662F"+i.value)};E(i,()=>{X(()=>{c()})}),E(v,()=>{a.value.muted=v.value}),E(h,()=>(console.log(h.value),t.setMuted(!1),a.value.volume=h.value)),H(()=>{a.value.volume=h.value}),E(p,()=>{a.value.currentTime=p.value}),ne(()=>{console.log(n.value)}),E(s,async()=>{console.log(s.value),localStorage.setItem("curSongId",s.value+"");const x=await w(s.value);if(x)t.setSongUrl(x);else{const L=`https://music.163.com/song/media/outer/url?id=${s.value}.mp3`;t.setSongUrl(L)}S()});const S=async()=>{console.log("\u83B7\u53D6\u8BE6\u60C5");const x={ids:s.value},L=await N.getSongDetail(x);if(L.code===200){console.log(L);const V=L.songs[0];D(V)}else R.error(L.message)},w=async x=>{var J;console.log("\u83B7\u53D6\u8BE6\u60C5");const L={id:s.value},V=await N.searchUrl(L);if(V.code===200)return console.log(V),((J=V.data[0])==null?void 0:J.url)||"";R.error(V.message)},D=async x=>{console.log(x.id),console.log(s.value),l.value=x.name,o.value=x.ar[0].name,y.value=x.al.picUrl,t.setPlaylist({id:s.value,name:l.value,author:o.value}),t.setIsPlaying(!1),X(()=>{t.setIsPlaying(!0)})};t.setSongId(Number(localStorage.getItem("curSongId")));const F=()=>{console.log("emptied"),t.setIsPlaying(!1)},$=()=>{console.log("canplay"),t.setTotalTime(a.value.duration)},O=()=>{console.log("ended")},G=()=>{console.log("timeupdate"),t.setCurTime(a.value.currentTime)};return(x,L)=>(f(),I("div",_t,[d("audio",{ref:V=>{a.value=V},src:u(n),onCanplay:$,onEnded:O,onTimeupdate:G,onEmptied:F},null,40,dt)]))}});const gt={class:"global-player"},mt={class:"info"},vt={class:"left"},ht={class:"circle"},ft={class:"song-info"},yt={class:"title"},St={class:"author"},It={class:"right"},bt=k({setup(e){const t=C(),{curSongTitle:s,curSongAuthor:l,curSongPicUrl:o}=A(t);return(n,i)=>{const p=m("el-image");return f(),I("div",gt,[d("div",{class:"background",style:_e({backgroundImage:`url(${u(o)})`})},null,4),r(pt),d("div",mt,[d("div",vt,[d("div",ht,[r(p,{src:u(o)},null,8,["src"])]),d("div",ft,[d("p",yt,P(u(s)),1),d("p",St,P(u(l)),1)])]),d("div",It,[r(ut)])])])}}});var Tt=U(bt,[["__scopeId","data-v-1565cbe8"]]);const xt=k({setup(e){const t=C();return(s,l)=>{const o=m("router-view"),n=m("el-main"),i=m("el-footer"),p=m("el-container");return f(),I(j,null,[r(p,null,{default:g(()=>[r(rt),r(n,null,{default:g(()=>[r(o)]),_:1}),r(i,null,{default:g(()=>[r(je)]),_:1})]),_:1}),r(ge,{name:"move"},{default:g(()=>[de(r(Tt,null,null,512),[[pe,u(t).isGlobalShow]])]),_:1})],64)}}});var Pt=U(xt,[["__scopeId","data-v-1dc5e242"]]);const wt="modulepreload",Y={},$t="/",M=function(t,s){return!s||s.length===0?t():Promise.all(s.map(l=>{if(l=`${$t}${l}`,l in Y)return;Y[l]=!0;const o=l.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${n}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":wt,o||(i.as="script",i.crossOrigin=""),i.href=l,document.head.appendChild(i),o)return new Promise((p,h)=>{i.addEventListener("load",p),i.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t())},kt=[{name:"home",path:"/",component:()=>M(()=>import("./Home.e0247c67.js"),["assets/Home.e0247c67.js","assets/Home.711b6d18.css","assets/vendor.b4a3d6d4.js"])},{name:"searchList",path:"/searchList",component:()=>M(()=>import("./SearchList.4a36c2ac.js"),["assets/SearchList.4a36c2ac.js","assets/SearchList.8ae46d57.css","assets/vendor.b4a3d6d4.js"])},{name:"songInfo",path:"/songInfo/:id",component:()=>M(()=>import("./SongInfo.94112ab9.js"),["assets/SongInfo.94112ab9.js","assets/SongInfo.888fbf59.css","assets/vendor.b4a3d6d4.js"])},{name:"playlist",path:"/playlist/:id",component:()=>M(()=>import("./Playlist.5f4f86be.js"),["assets/Playlist.5f4f86be.js","assets/Playlist.27d6f0bc.css","assets/vendor.b4a3d6d4.js"])}],Ct=me({history:ve(),routes:kt});const Lt=he(Pt);Lt.use(fe).use(ye()).use(Ct).mount("#app");export{U as _,N as s,C as u};
