import{d as e,a as t,r as l,s as a,w as s,b as n,o,c as r,e as i,f as c,u,n as d,g as p,t as v,F as g,h as m,i as h,p as f,j as y,k as S,l as I,m as _,q as b,v as k,x as w,y as P,E as T,z as C,A as x,B as L,C as U,D as V,G as E,T as A,H as D,I as j,J as G,K as M,L as q}from"./vendor.b4a3d6d4.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const N=e("main",{state:()=>({isGlobalShow:!1,isPlaying:!1,isLogin:!1,curSongId:0,curSongTitle:"",curSongAuthor:"",curSongUrl:"",curSongPicUrl:"",changeTime:0,curTime:0,totalTime:0,volume:.1,muted:!1,lyric:[{lyric:"",time:"",duration:0}],rotateAngle:0,playlist:[],curPlaylistIndex:0}),getters:{},actions:{setSongId(e){this.curSongId=e},setIsPlaying(e){this.isPlaying=e},setChangeTime(e){this.changeTime=e},setTotalTime(e){this.totalTime=e},setCurTime(e){this.curTime=e},setSongUrl(e){this.curSongUrl=e},setVolume(e){this.volume=e},setLyric(e){this.lyric=e},setMuted(e){this.muted=e},setPlaylist(e){~this.playlist.findIndex((t=>t.id===e.id))||(this.curPlaylistIndex=this.playlist.length,this.playlist.push(e))},previousSong(){this.curPlaylistIndex--,this.setSongId(this.playlist[this.curPlaylistIndex].id)},nextSong(){this.curPlaylistIndex++,this.setSongId(this.playlist[this.curPlaylistIndex].id)}}});function O(e){let t=parseInt(e),l=0,a=0;t>60&&(l=parseInt((t/60).toString()),t=parseInt((t%60).toString()),l>60&&(a=parseInt((l/60).toString()),l=60));let s="";return s=parseInt(t.toString())<10?"0:0"+parseInt(t.toString()):"0:"+parseInt(t.toString()),l>0&&(s=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),s=parseInt(l.toString())+":"+s),a>0&&(s=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),s=parseInt(a.toString())+":"+parseInt(l.toString())+":"+s),s}var R=(e,t)=>{const l=e.__vccOpts||e;for(const[a,s]of t)l[a]=s;return l};const $={class:"progress"};var K=R(t({setup(e){const t=N(),c=l("00:00"),u=l("00:00"),{curTime:d,totalTime:p}=a(t),v=l(0);s(d,(()=>{c.value=O(d.value+""),u.value=O(p.value+""),v.value=d.value/p.value*100}));const g=()=>{t.setChangeTime(p.value*(.01*v.value))},m=e=>O(p.value*(.01*e)+"");return(e,t)=>{const l=n("el-slider");return o(),r("div",$,[i(l,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),onChange:g,"format-tooltip":m},null,8,["modelValue"])])}}}),[["__scopeId","data-v-dd282e38"]]);const z={class:"current-play"},H={class:"left-image"},B={class:"cover"},F={class:"right"},J={class:"title"},W={class:"author"};var Q=R(t({setup(e){const t=N(),{curSongPicUrl:l,curSongTitle:s,curSongAuthor:g,isGlobalShow:m}=a(t);return(e,t)=>{const a=n("el-image"),h=n("el-link"),f=n("el-tooltip");return o(),r("div",z,[c("div",H,[i(a,{src:u(l)},null,8,["src"]),c("span",B,[i(h,{onClick:t[0]||(t[0]=e=>m.value=!u(m)),class:d(["expand-icon iconfont",u(m)?"icon-exit-fullscreen":"icon-full"]),underline:!1},null,8,["class"])])]),c("div",F,[i(f,{content:u(s),placement:"right"},{default:p((()=>[c("div",J,v(u(s)),1)])),_:1},8,["content"]),i(f,{content:u(g),placement:"right"},{default:p((()=>[c("div",W,v(u(g)),1)])),_:1},8,["content"])])])}}}),[["__scopeId","data-v-e7a690b2"]]);const X={class:"global-playlist"},Y={key:0},Z=["onClick"],ee={class:"title"},te={class:"author"},le=(e=>(f("data-v-2258d355"),e=e(),y(),e))((()=>c("i",{class:"iconfont icon-24gf-playlistMusic2"},null,-1)));var ae=R(t({setup(e){const t=N(),{playlist:l,curSongId:s}=a(t);return(e,a)=>{const f=n("el-empty"),y=n("el-button"),S=n("el-popover");return o(),r("div",X,[i(S,{placement:"top",width:200,trigger:"click",teleported:!1},{reference:p((()=>[i(y,{type:"text"},{icon:p((()=>[le])),_:1})])),default:p((()=>[u(l).length?(o(),r("div",Y,[(o(!0),r(g,null,m(u(l),(e=>(o(),r("div",{class:d(["playlist-item",{playing:u(s)===e.id}]),onClick:l=>u(t).setSongId(e.id)},[c("div",ee,v(e.name),1),c("div",te,v(e.author),1)],10,Z)))),256))])):(o(),h(f,{key:1}))])),_:1})])}}}),[["__scopeId","data-v-2258d355"]]);const se=e=>(f("data-v-964c9b8c"),e=e(),y(),e),ne={class:"bottom-toolbox"},oe={class:"wrapper"},re={class:"center-control"},ie={class:"time-progress"},ce=se((()=>c("span",{class:"iconfont icon-24gf-previous"},null,-1))),ue=se((()=>c("span",{class:"iconfont icon-24gf-next"},null,-1))),de={class:"volume"};var pe=R(t({setup(e){const t=N(),{curTime:s,totalTime:g,volume:m,isGlobalShow:h,isPlaying:f,muted:y,curPlaylistIndex:_,playlist:b}=a(t),k=S((()=>O(s.value+""))),w=S((()=>O(g.value+""))),P=()=>{h.value=!h.value},T=()=>{f.value=!f.value},C=l(0);C.value=100*m.value;const x=()=>{t.setVolume(C.value/100)};return(e,l)=>{const a=n("el-button"),s=n("el-link"),g=n("el-slider");return o(),r("div",ne,[i(K),c("div",oe,[i(Q),c("div",re,[c("div",ie,v(u(k))+" / "+v(u(w)),1),i(a,{type:"text",onClick:u(t).previousSong,disabled:!u(_)},{icon:p((()=>[ce])),_:1},8,["onClick","disabled"]),i(a,{class:"play-button",type:"primary",circle:"",onClick:T},{icon:p((()=>[c("span",{class:d(["iconfont",u(t).isPlaying?"icon-24gf-pause2":"icon-24gf-play"])},null,2)])),_:1}),i(a,{type:"text",onClick:u(t).nextSong,disabled:u(_)>=u(b).length-1},{icon:p((()=>[ue])),_:1},8,["onClick","disabled"]),i(s,{onClick:P},{default:p((()=>[I(v(u(h)?"收起":"展开"),1)])),_:1})]),c("div",de,[c("i",{class:d(["iconfont",C.value&&!u(y)?"icon-24gf-volumeMiddle":"icon-24gf-volumeDisable"]),onClick:l[0]||(l[0]=e=>u(t).setMuted(!u(y)))},null,2),i(g,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=e=>C.value=e),onInput:x},null,8,["modelValue"])]),i(ae)])])}}}),[["__scopeId","data-v-964c9b8c"]]);const ve=_.create({baseURL:"https://netease-cloud-music-api-dun-nu.vercel.app",timeout:2e4});ve.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.token=t),e}),(e=>Promise.reject(e))),ve.interceptors.response.use((e=>(e.data.code,e)),(e=>Promise.reject(e)));const ge=async e=>{const{data:t}=await ve.request(e);return t};var me={getTopPlaylist:e=>ge({url:"/top/playlist",method:"get",params:e}),searchSong:e=>ge({url:"/search",method:"get",params:e}),getSearchDefault:e=>ge({url:"/search/default",method:"get",params:e}),searchSuggest:e=>ge({url:"/search/suggest",method:"get",params:e}),searchUrl:e=>ge({url:"/song/url",method:"get",params:e}),getSongDetail:e=>ge({url:"/song/detail",method:"get",params:e}),getLyric:e=>ge({url:"/lyric",method:"get",params:e}),getPlaylist:e=>ge({url:"/playlist/detail",method:"get",params:e})};const he={class:"search"},fe=["onClick"];var ye=R(t({setup(e){var t,s;const d=b(),g=l(""),m=l(""),h=l("");g.value=(null==(s=null==(t=d.query)?void 0:t.keywords)?void 0:s.toString())||"";const f=k();(async()=>{const e=await me.getSearchDefault({});200===e.code?(m.value=e.data.showKeyword,h.value=e.data.realkeyword):T.error(e.message)})();const y=async(e,t)=>{if(!e)return void t([]);const l={keywords:e},a=await me.searchSuggest(l);200===a.code?t(a.result.songs):T.error(a.message)},S=N(),{isGlobalShow:I}=a(S),_=e=>{I.value=!1,e?(g.value||(g.value=e),f.push({name:"searchList",query:{keywords:e}})):T.warning("无搜索内容")};return(e,t)=>{const l=n("el-autocomplete"),a=n("el-col"),s=n("el-button"),d=n("el-row");return o(),r("div",he,[i(d,null,{default:p((()=>[i(a,{span:22},{default:p((()=>[i(l,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),placeholder:m.value,"fetch-suggestions":y,onKeyup:t[1]||(t[1]=w((e=>_(g.value||h.value)),["enter"]))},{default:p((({item:e})=>[c("div",{onClick:t=>{var l;(l=e.id)?f.push({name:"songInfo",params:{id:l}}):T.warning("无内容")}},v(e.name),9,fe)])),_:1},8,["modelValue","placeholder"])])),_:1}),i(a,{span:2},{default:p((()=>[i(s,{icon:u(P),circle:"",onClick:t[2]||(t[2]=e=>_(g.value||h.value))},null,8,["icon"])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-37b581d3"]]);const Se=(e=>(f("data-v-04468cca"),e=e(),y(),e))((()=>c("span",{class:"logo"},"SIM MUSIC",-1)));var Ie=R(t({setup(e){const t=N(),{isGlobalShow:l}=a(t),s=()=>{},r=()=>{},d=k(),v=()=>{l.value=!1,d.push({name:"home"})};return(e,l)=>{const a=n("el-button"),d=n("el-col"),g=n("el-avatar"),m=n("el-dropdown-item"),f=n("el-dropdown-menu"),y=n("el-dropdown"),S=n("el-header");return o(),h(S,null,{default:p((()=>[i(d,{span:8},{default:p((()=>[i(a,{onClick:v,type:"text",style:{color:"#fff"}},{default:p((()=>[Se])),_:1})])),_:1}),i(d,{span:8},{default:p((()=>[i(ye)])),_:1}),i(d,{style:{"text-align":"right"},span:8},{default:p((()=>[u(t).isLogin?(o(),h(y,{key:1},{dropdown:p((()=>[i(f,null,{default:p((()=>[i(m,null,{default:p((()=>[c("span",{onClick:r},"退出登录")])),_:1})])),_:1})])),default:p((()=>[i(g,{size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"})])),_:1})):(o(),h(g,{key:0,onClick:s,size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}))])),_:1})])),_:1})}}}),[["__scopeId","data-v-04468cca"]]);const _e={class:"lyric-area"};var be=R(t({setup(e){const t=N(),{curSongId:n,curTime:i,isPlaying:p}=a(t);let h=l([]);const f=l(),y=l();C((()=>{var e;null==(e=y.value)||e.scrollIntoView()}));const S=async e=>{const l={id:e},a=await me.getLyric(l);200===a.code?(h.value=a.lrc.lyric.split("\n").filter((e=>e)).map((e=>{const t=e.match(/^\[(.*)\:(.*)\.(.*)\]/);return{lyric:e.replace(/\[.*\]/,""),time:e.match(/\[(.*)\]/)&&e.match(/\[(.*)\]/)[1]||"",duration:t?60*Number(t[1])+1*Number(t[2])+.001*Number(t[3]):0}})),t.setLyric(h.value)):T.error(a.message)},I=l(0);s(i,(()=>{I.value=h.value.filter((e=>e.duration<i.value)).length-1})),s(p,(()=>{var e;p.value&&(null==(e=y.value)||e.scrollIntoView({block:"center",behavior:"smooth"}))})),x((()=>{var e;null==(e=y.value)||e.scrollIntoView({block:"center",behavior:"smooth"})})),C((()=>{var e;null==(e=f.value)||e.addEventListener})),n.value&&S(n.value);return s(n,(()=>{S(n.value)})),(e,t)=>(o(),r("div",_e,[c("div",{ref_key:"lyricRef",ref:f,class:"lyric"},[(o(!0),r(g,null,m(u(h),((e,t)=>(o(),r("p",{ref_for:!0,ref:e=>{I.value===t&&(y.value=e)},class:d({current:I.value===t})},v(e.lyric.replace(/\[.*\]/,"")),3)))),256))],512)]))}}),[["__scopeId","data-v-f85e8492"]]);const ke={class:"sim-audio"},we=["src"],Pe=t({setup(e){const t=N(),{curSongId:n,curSongTitle:i,curSongAuthor:d,curSongUrl:p,isPlaying:v,changeTime:g,volume:m,muted:h,curSongPicUrl:f,curPlaylistIndex:y,playlist:S}=a(t),I=l();s(v,(()=>{L((()=>{v.value?I.value.play():I.value.pause()}))})),s(h,(()=>{I.value.muted=h.value})),s(m,(()=>(t.setMuted(!1),I.value.volume=m.value))),C((()=>{I.value.volume=m.value})),s(g,(()=>{I.value.currentTime=g.value})),x((()=>{})),s(n,(async()=>{localStorage.setItem("curSongId",n.value+"");const e=await b(n.value);if(e)t.setSongUrl(e);else{const e=`https://music.163.com/song/media/outer/url?id=${n.value}.mp3`;t.setSongUrl(e)}_()}));const _=async()=>{const e={ids:n.value},t=await me.getSongDetail(e);if(200===t.code){const e=t.songs[0];k(e)}else T.error(t.message)},b=async e=>{var t;const l={id:n.value},a=await me.searchUrl(l);if(200===a.code)return(null==(t=a.data[0])?void 0:t.url)||"";T.error(a.message)},k=async e=>{i.value=e.name,d.value=e.ar[0].name,f.value=e.al.picUrl,t.setPlaylist({id:n.value,name:i.value,author:d.value}),t.setIsPlaying(!1),L((()=>{t.setIsPlaying(!0)}))};t.setSongId(Number(localStorage.getItem("curSongId")));const w=()=>{t.setIsPlaying(!1)},P=()=>{t.setTotalTime(I.value.duration)},U=()=>{},V=()=>{t.setCurTime(I.value.currentTime)};return(e,t)=>(o(),r("div",ke,[c("audio",{ref:e=>{I.value=e},src:u(p),onCanplay:P,onEnded:U,onTimeupdate:V,onEmptied:w},null,40,we)]))}});const Te={class:"global-player"},Ce={class:"info"},xe={class:"left"},Le={class:"circle"},Ue={class:"song-info"},Ve={class:"title"},Ee={class:"author"},Ae={class:"right"};var De=R(t({setup(e){const t=N(),{curSongTitle:l,curSongAuthor:s,curSongPicUrl:d,isGlobalShow:p}=a(t);return(e,t)=>{const a=n("el-link"),g=n("el-image");return o(),r("div",Te,[c("div",{class:"background",style:U({backgroundImage:`url(${u(d)})`})},null,4),i(a,{onClick:t[0]||(t[0]=e=>p.value=!1),class:"expand-icon iconfont icon-exit-fullscreen",underline:!1}),i(Pe),c("div",Ce,[c("div",xe,[c("div",Le,[i(g,{src:u(d)},null,8,["src"])]),c("div",Ue,[c("p",Ve,v(u(l)),1),c("p",Ee,v(u(s)),1)])]),c("div",Ae,[i(be)])])])}}}),[["__scopeId","data-v-474514fe"]]);var je=R(t({setup(e){const t=N();return(e,l)=>{const a=n("router-view"),s=n("el-main"),c=n("el-footer"),d=n("el-container");return o(),r(g,null,[i(d,null,{default:p((()=>[i(Ie),i(s,null,{default:p((()=>[i(a)])),_:1}),i(c,null,{default:p((()=>[i(pe)])),_:1})])),_:1}),i(A,{name:"move"},{default:p((()=>[V(i(De,null,null,512),[[E,u(t).isGlobalShow]])])),_:1})],64)}}}),[["__scopeId","data-v-7cfc0099"]]);const Ge={},Me=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in Ge)return;Ge[e]=!0;const t=e.endsWith(".css"),l=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${l}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((t,l)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>l(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()},qe=[{name:"home",path:"/",component:()=>Me((()=>import("./Home.10c72f91.js")),["assets/Home.10c72f91.js","assets/Home.cf9ffed5.css","assets/vendor.b4a3d6d4.js"])},{name:"searchList",path:"/searchList",component:()=>Me((()=>import("./SearchList.809fb030.js")),["assets/SearchList.809fb030.js","assets/SearchList.dde51a43.css","assets/vendor.b4a3d6d4.js"])},{name:"songInfo",path:"/songInfo/:id",component:()=>Me((()=>import("./SongInfo.bbdad00e.js")),["assets/SongInfo.bbdad00e.js","assets/SongInfo.888fbf59.css","assets/vendor.b4a3d6d4.js"])},{name:"playlist",path:"/playlist/:id",component:()=>Me((()=>import("./Playlist.fb4f2c8a.js")),["assets/Playlist.fb4f2c8a.js","assets/Playlist.d6ae99ca.css","assets/vendor.b4a3d6d4.js"])}],Ne=D({history:j(),routes:qe});G(je).use(M).use(q()).use(Ne).mount("#app");export{R as _,me as s,N as u};
