import{d as e,a as t,r as l,s as a,w as s,b as n,o,c as r,e as i,f as c,u,n as d,g as p,t as v,F as g,h as m,i as h,p as y,j as f,k as S,l as I,m as _,q as b,v as k,x as w,E as P,y as T,z as C,A as x,B as L,C as U,D as V,T as E,G as A,H as D,I as j,J as G,K as M}from"./vendor.c69dc351.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const q=e("main",{state:()=>({isGlobalShow:!1,isPlaying:!1,isLogin:!1,curSongId:0,curSongTitle:"",curSongAuthor:"",curSongUrl:"",curSongPicUrl:"",changeTime:0,curTime:0,totalTime:0,volume:.1,muted:!1,lyric:[{lyric:"",time:"",duration:0}],rotateAngle:0,playlist:[],curPlaylistIndex:0}),getters:{},actions:{setSongId(e){this.curSongId=e},setIsPlaying(e){this.isPlaying=e},setChangeTime(e){this.changeTime=e},setTotalTime(e){this.totalTime=e},setCurTime(e){this.curTime=e},setSongUrl(e){this.curSongUrl=e},setVolume(e){this.volume=e},setLyric(e){this.lyric=e},setMuted(e){this.muted=e},setPlaylist(e){~this.playlist.findIndex((t=>t.id===e.id))||(this.curPlaylistIndex=this.playlist.length,this.playlist.push(e))},previousSong(){this.curPlaylistIndex--,this.setSongId(this.playlist[this.curPlaylistIndex].id)},nextSong(){this.curPlaylistIndex++,this.setSongId(this.playlist[this.curPlaylistIndex].id)}}});function N(e){let t=parseInt(e),l=0,a=0;t>60&&(l=parseInt((t/60).toString()),t=parseInt((t%60).toString()),l>60&&(a=parseInt((l/60).toString()),l=60));let s="";return s=parseInt(t.toString())<10?"0:0"+parseInt(t.toString()):"0:"+parseInt(t.toString()),l>0&&(s=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),s=parseInt(l.toString())+":"+s),a>0&&(s=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),s=parseInt(a.toString())+":"+parseInt(l.toString())+":"+s),s}var O=(e,t)=>{const l=e.__vccOpts||e;for(const[a,s]of t)l[a]=s;return l};const R={class:"progress"};var $=O(t({setup(e){const t=q(),c=l("00:00"),u=l("00:00"),{curTime:d,totalTime:p}=a(t),v=l(0);s(d,(()=>{c.value=N(d.value+""),u.value=N(p.value+""),v.value=d.value/p.value*100}));const g=()=>{t.setChangeTime(p.value*(.01*v.value))},m=e=>N(p.value*(.01*e)+"");return(e,t)=>{const l=n("el-slider");return o(),r("div",R,[i(l,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),onChange:g,"format-tooltip":m},null,8,["modelValue"])])}}}),[["__scopeId","data-v-dd282e38"]]);const K={class:"current-play"},z={class:"left-image"},H={class:"cover"},B={class:"right"},F={class:"title"},J={class:"author"};var W=O(t({setup(e){const t=q(),{curSongPicUrl:l,curSongTitle:s,curSongAuthor:g,isGlobalShow:m}=a(t);return(e,t)=>{const a=n("el-image"),h=n("el-link"),y=n("el-tooltip");return o(),r("div",K,[c("div",z,[i(a,{src:u(l)},null,8,["src"]),c("span",H,[i(h,{onClick:t[0]||(t[0]=e=>m.value=!u(m)),class:d(["expand-icon iconfont",u(m)?"icon-exit-fullscreen":"icon-full"]),underline:!1},null,8,["class"])])]),c("div",B,[i(y,{content:u(s),placement:"right"},{default:p((()=>[c("div",F,v(u(s)),1)])),_:1},8,["content"]),i(y,{content:u(g),placement:"right"},{default:p((()=>[c("div",J,v(u(g)),1)])),_:1},8,["content"])])])}}}),[["__scopeId","data-v-e7a690b2"]]);const Q={class:"global-playlist"},X={key:0},Y=["onClick"],Z={class:"title"},ee={class:"author"},te=(e=>(y("data-v-2258d355"),e=e(),f(),e))((()=>c("i",{class:"iconfont icon-24gf-playlistMusic2"},null,-1)));var le=O(t({setup(e){const t=q(),{playlist:l,curSongId:s}=a(t);return(e,a)=>{const y=n("el-empty"),f=n("el-button"),S=n("el-popover");return o(),r("div",Q,[i(S,{placement:"top",width:200,trigger:"click",teleported:!1},{reference:p((()=>[i(f,{type:"text"},{icon:p((()=>[te])),_:1})])),default:p((()=>[u(l).length?(o(),r("div",X,[(o(!0),r(g,null,m(u(l),(e=>(o(),r("div",{class:d(["playlist-item",{playing:u(s)===e.id}]),onClick:l=>u(t).setSongId(e.id)},[c("div",Z,v(e.name),1),c("div",ee,v(e.author),1)],10,Y)))),256))])):(o(),h(y,{key:1}))])),_:1})])}}}),[["__scopeId","data-v-2258d355"]]);const ae=e=>(y("data-v-4a8eb57f"),e=e(),f(),e),se={class:"bottom-toolbox"},ne={class:"wrapper"},oe={class:"center-control"},re={class:"time-progress"},ie=ae((()=>c("span",{class:"iconfont icon-24gf-previous"},null,-1))),ce=ae((()=>c("span",{class:"iconfont icon-24gf-next"},null,-1))),ue={class:"volume"};var de=O(t({setup(e){const t=q(),{curTime:s,totalTime:g,volume:m,isGlobalShow:h,isPlaying:y,muted:f,curPlaylistIndex:I,playlist:_}=a(t),b=S((()=>N(s.value+""))),k=S((()=>N(g.value+""))),w=()=>{y.value=!y.value},P=l(0);P.value=100*m.value;const T=()=>{t.setVolume(P.value/100)};return(e,l)=>{const a=n("el-button"),s=n("el-slider");return o(),r("div",se,[i($),c("div",ne,[i(W),c("div",oe,[c("div",re,v(u(b))+" / "+v(u(k)),1),i(a,{type:"text",onClick:u(t).previousSong,disabled:!u(I)},{icon:p((()=>[ie])),_:1},8,["onClick","disabled"]),i(a,{class:"play-button",type:"primary",circle:"",onClick:w},{icon:p((()=>[c("span",{class:d(["iconfont",u(t).isPlaying?"icon-24gf-pause2":"icon-24gf-play"])},null,2)])),_:1}),i(a,{type:"text",onClick:u(t).nextSong,disabled:u(I)>=u(_).length-1},{icon:p((()=>[ce])),_:1},8,["onClick","disabled"])]),c("div",ue,[c("i",{class:d(["iconfont",P.value&&!u(f)?"icon-24gf-volumeMiddle":"icon-24gf-volumeDisable"]),onClick:l[0]||(l[0]=e=>u(t).setMuted(!u(f)))},null,2),i(s,{modelValue:P.value,"onUpdate:modelValue":l[1]||(l[1]=e=>P.value=e),onInput:T},null,8,["modelValue"])]),i(le)])])}}}),[["__scopeId","data-v-4a8eb57f"]]);const pe=I.create({baseURL:"https://netease-cloud-music-api-dun-nu.vercel.app",timeout:2e4});pe.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.token=t),e}),(e=>Promise.reject(e))),pe.interceptors.response.use((e=>(e.data.code,e)),(e=>Promise.reject(e)));const ve=async e=>{const{data:t}=await pe.request(e);return t};var ge={getTopPlaylist:e=>ve({url:"/top/playlist",method:"get",params:e}),searchSong:e=>ve({url:"/search",method:"get",params:e}),getSearchDefault:e=>ve({url:"/search/default",method:"get",params:e}),searchSuggest:e=>ve({url:"/search/suggest",method:"get",params:e}),searchUrl:e=>ve({url:"/song/url",method:"get",params:e}),getSongDetail:e=>ve({url:"/song/detail",method:"get",params:e}),getLyric:e=>ve({url:"/lyric",method:"get",params:e}),getPlaylist:e=>ve({url:"/playlist/detail",method:"get",params:e})};const me={class:"search"},he=["onClick"];var ye=O(t({setup(e){var t,s;const d=_(),g=l(""),m=l(""),h=l("");g.value=(null==(s=null==(t=d.query)?void 0:t.keywords)?void 0:s.toString())||"";const y=b();(async()=>{const e=await ge.getSearchDefault({});200===e.code?(m.value=e.data.showKeyword,h.value=e.data.realkeyword):P.error(e.message)})();const f=async(e,t)=>{if(!e)return void t([]);const l={keywords:e},a=await ge.searchSuggest(l);200===a.code?t(a.result.songs):P.error(a.message)},S=q(),{isGlobalShow:I}=a(S),T=e=>{I.value=!1,e?(g.value||(g.value=e),y.push({name:"searchList",query:{keywords:e}})):P.warning("无搜索内容")};return(e,t)=>{const l=n("el-autocomplete"),a=n("el-col"),s=n("el-button"),d=n("el-row");return o(),r("div",me,[i(d,null,{default:p((()=>[i(a,{span:22},{default:p((()=>[i(l,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),placeholder:m.value,"fetch-suggestions":f,onKeyup:t[1]||(t[1]=k((e=>T(g.value||h.value)),["enter"]))},{default:p((({item:e})=>[c("div",{onClick:t=>{var l;(l=e.id)?y.push({name:"songInfo",params:{id:l}}):P.warning("无内容")}},v(e.name),9,he)])),_:1},8,["modelValue","placeholder"])])),_:1}),i(a,{span:2},{default:p((()=>[i(s,{icon:u(w),circle:"",onClick:t[2]||(t[2]=e=>T(g.value||h.value))},null,8,["icon"])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-37b581d3"]]);const fe=(e=>(y("data-v-04468cca"),e=e(),f(),e))((()=>c("span",{class:"logo"},"SIM MUSIC",-1)));var Se=O(t({setup(e){const t=q(),{isGlobalShow:l}=a(t),s=()=>{},r=()=>{},d=b(),v=()=>{l.value=!1,d.push({name:"home"})};return(e,l)=>{const a=n("el-button"),d=n("el-col"),g=n("el-avatar"),m=n("el-dropdown-item"),y=n("el-dropdown-menu"),f=n("el-dropdown"),S=n("el-header");return o(),h(S,null,{default:p((()=>[i(d,{span:8},{default:p((()=>[i(a,{onClick:v,type:"text",style:{color:"#fff"}},{default:p((()=>[fe])),_:1})])),_:1}),i(d,{span:8},{default:p((()=>[i(ye)])),_:1}),i(d,{style:{"text-align":"right"},span:8},{default:p((()=>[u(t).isLogin?(o(),h(f,{key:1},{dropdown:p((()=>[i(y,null,{default:p((()=>[i(m,null,{default:p((()=>[c("span",{onClick:r},"退出登录")])),_:1})])),_:1})])),default:p((()=>[i(g,{size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"})])),_:1})):(o(),h(g,{key:0,onClick:s,size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}))])),_:1})])),_:1})}}}),[["__scopeId","data-v-04468cca"]]);const Ie={class:"lyric-area"};var _e=O(t({setup(e){const t=q(),{curSongId:n,curTime:i,isPlaying:p}=a(t);let h=l([]);const y=l(),f=l();T((()=>{var e;null==(e=f.value)||e.scrollIntoView()}));const S=async e=>{const l={id:e},a=await ge.getLyric(l);200===a.code?(h.value=a.lrc.lyric.split("\n").filter((e=>e)).map((e=>{const t=e.match(/^\[(.*)\:(.*)\.(.*)\]/);return{lyric:e.replace(/\[.*\]/,""),time:e.match(/\[(.*)\]/)&&e.match(/\[(.*)\]/)[1]||"",duration:t?60*Number(t[1])+1*Number(t[2])+.001*Number(t[3]):0}})),t.setLyric(h.value)):P.error(a.message)},I=l(0);s(i,(()=>{I.value=h.value.filter((e=>e.duration<i.value)).length-1})),s(p,(()=>{var e;p.value&&(null==(e=f.value)||e.scrollIntoView({block:"center",behavior:"smooth"}))})),C((()=>{var e;null==(e=f.value)||e.scrollIntoView({block:"center",behavior:"smooth"})})),T((()=>{var e;null==(e=y.value)||e.addEventListener})),n.value&&S(n.value);return s(n,(()=>{S(n.value)})),(e,t)=>(o(),r("div",Ie,[c("div",{ref_key:"lyricRef",ref:y,class:"lyric"},[(o(!0),r(g,null,m(u(h),((e,t)=>(o(),r("p",{ref_for:!0,ref:e=>{I.value===t&&(f.value=e)},class:d({current:I.value===t})},v(e.lyric.replace(/\[.*\]/,"")),3)))),256))],512)]))}}),[["__scopeId","data-v-f85e8492"]]);const be={class:"sim-audio"},ke=["src"],we=t({setup(e){const t=q(),{curSongId:n,curSongTitle:i,curSongAuthor:d,curSongUrl:p,isPlaying:v,changeTime:g,volume:m,muted:h,curSongPicUrl:y,curPlaylistIndex:f,playlist:S}=a(t),I=l();s(v,(()=>{x((()=>{v.value?I.value.play():I.value.pause()}))})),s(h,(()=>{I.value.muted=h.value})),s(m,(()=>(t.setMuted(!1),I.value.volume=m.value))),T((()=>{I.value.volume=m.value})),s(g,(()=>{I.value.currentTime=g.value})),C((()=>{})),s(n,(async()=>{localStorage.setItem("curSongId",n.value+"");const e=await b(n.value);if(e)t.setSongUrl(e);else{const e=`https://music.163.com/song/media/outer/url?id=${n.value}.mp3`;t.setSongUrl(e)}_()}));const _=async()=>{const e={ids:n.value},t=await ge.getSongDetail(e);if(200===t.code){const e=t.songs[0];k(e)}else P.error(t.message)},b=async e=>{var t;const l={id:n.value},a=await ge.searchUrl(l);if(200===a.code)return(null==(t=a.data[0])?void 0:t.url)||"";P.error(a.message)},k=async e=>{i.value=e.name,d.value=e.ar[0].name,y.value=e.al.picUrl,t.setPlaylist({id:n.value,name:i.value,author:d.value}),t.setIsPlaying(!1),x((()=>{t.setIsPlaying(!0)}))};t.setSongId(Number(localStorage.getItem("curSongId")));const w=()=>{t.setIsPlaying(!1)},L=()=>{t.setTotalTime(I.value.duration)},U=()=>{},V=()=>{t.setCurTime(I.value.currentTime)};return(e,t)=>(o(),r("div",be,[c("audio",{ref:e=>{I.value=e},src:u(p),onCanplay:L,onEnded:U,onTimeupdate:V,onEmptied:w},null,40,ke)]))}});const Pe={class:"global-player"},Te={class:"info"},Ce={class:"left"},xe={class:"circle"},Le={class:"song-info"},Ue={class:"title"},Ve={class:"author"},Ee={class:"right"};var Ae=O(t({setup(e){const t=q(),{curSongTitle:l,curSongAuthor:s,curSongPicUrl:d,isGlobalShow:p}=a(t);return(e,t)=>{const a=n("el-link"),g=n("el-image");return o(),r("div",Pe,[c("div",{class:"background",style:L({backgroundImage:`url(${u(d)})`})},null,4),i(a,{onClick:t[0]||(t[0]=e=>p.value=!1),class:"expand-icon iconfont icon-exit-fullscreen",underline:!1}),i(we),c("div",Te,[c("div",Ce,[c("div",xe,[i(g,{src:u(d)},null,8,["src"])]),c("div",Le,[c("p",Ue,v(u(l)),1),c("p",Ve,v(u(s)),1)])]),c("div",Ee,[i(_e)])])])}}}),[["__scopeId","data-v-474514fe"]]);var De=O(t({setup(e){const t=q();return(e,l)=>{const a=n("router-view"),s=n("el-main"),c=n("el-footer"),d=n("el-container");return o(),r(g,null,[i(d,null,{default:p((()=>[i(Se),i(s,null,{default:p((()=>[i(a)])),_:1}),i(c,null,{default:p((()=>[i(de)])),_:1})])),_:1}),i(E,{name:"move"},{default:p((()=>[U(i(Ae,null,null,512),[[V,u(t).isGlobalShow]])])),_:1})],64)}}}),[["__scopeId","data-v-7cfc0099"]]);const je={},Ge=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in je)return;je[e]=!0;const t=e.endsWith(".css"),l=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${l}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((t,l)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>l(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()},Me=[{name:"home",path:"/",component:()=>Ge((()=>import("./Home.da2222e5.js")),["assets/Home.da2222e5.js","assets/Home.cf9ffed5.css","assets/vendor.c69dc351.js"])},{name:"searchList",path:"/searchList",component:()=>Ge((()=>import("./SearchList.c15cba51.js")),["assets/SearchList.c15cba51.js","assets/SearchList.dde51a43.css","assets/vendor.c69dc351.js"])},{name:"songInfo",path:"/songInfo/:id",component:()=>Ge((()=>import("./SongInfo.839c59de.js")),["assets/SongInfo.839c59de.js","assets/SongInfo.888fbf59.css","assets/vendor.c69dc351.js"])},{name:"playlist",path:"/playlist/:id",component:()=>Ge((()=>import("./Playlist.68223207.js")),["assets/Playlist.68223207.js","assets/Playlist.d6ae99ca.css","assets/vendor.c69dc351.js"])}],qe=A({history:D(),routes:Me});j(De).use(G).use(M()).use(qe).mount("#app");export{O as _,ge as s,q as u};
