import{d as ae,a as k,r as x,s as V,w as E,b as v,o as y,c as b,e as a,u as i,f as d,t as w,g as m,F as j,h as Z,n as K,i as z,p as ee,j as te,k as Q,l as oe,m as re,q as ce,v as se,x as ie,y as ue,E as F,z as H,A as ne,B as X,C as _e,D as de,G as pe,T as ge,H as me,I as ve,J as he,K as fe,L as ye}from"./vendor.b4a3d6d4.js";const Se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};Se();const C=ae("main",{state:()=>({isGlobalShow:!1,isPlaying:!1,isLogin:!1,curSongId:0,curSongTitle:"",curSongAuthor:"",curSongUrl:"",curSongPicUrl:"",changeTime:0,curTime:0,totalTime:0,volume:.1,muted:!1,lyric:[{lyric:"",time:"",duration:0}],rotateAngle:0,playlist:[],curPlaylistIndex:0}),getters:{},actions:{setSongId(e){this.curSongId=e},setIsPlaying(e){this.isPlaying=e},setChangeTime(e){this.changeTime=e},setTotalTime(e){this.totalTime=e},setCurTime(e){this.curTime=e},setSongUrl(e){this.curSongUrl=e},setVolume(e){this.volume=e},setLyric(e){this.lyric=e},setMuted(e){this.muted=e},setPlaylist(e){~this.playlist.findIndex(s=>s.id===e.id)||(this.curPlaylistIndex=this.playlist.length,this.playlist.push(e))},previousSong(){this.curPlaylistIndex--,this.setSongId(this.playlist[this.curPlaylistIndex].id)},nextSong(){this.curPlaylistIndex++,this.setSongId(this.playlist[this.curPlaylistIndex].id)}}});function O(e){let t=parseInt(e),s=0,l=0;t>60&&(s=parseInt((t/60).toString()),t=parseInt((t%60).toString()),s>60&&(l=parseInt((s/60).toString()),s=60));let o="";return parseInt(t.toString())<10?o="0:0"+parseInt(t.toString()):o="0:"+parseInt(t.toString()),s>0&&(parseInt(t.toString())<10?o="0"+parseInt(t.toString()):o=parseInt(t.toString()).toString(),o=parseInt(s.toString())+":"+o),l>0&&(parseInt(t.toString())<10?o="0"+parseInt(t.toString()):o=parseInt(t.toString()).toString(),o=parseInt(l.toString())+":"+parseInt(s.toString())+":"+o),o}var A=(e,t)=>{const s=e.__vccOpts||e;for(const[l,o]of t)s[l]=o;return s};const Ie={class:"progress"},be=k({setup(e){const t=C(),s=x("00:00"),l=x("00:00"),{curTime:o,totalTime:n}=V(t),r=x(0);E(o,()=>{s.value=O(o.value+""),l.value=O(n.value+""),r.value=o.value/n.value*100});const p=()=>{t.setChangeTime(n.value*(r.value*.01))},f=h=>O(n.value*(h*.01)+"");return(h,S)=>{const u=v("el-slider");return y(),b("div",Ie,[a(u,{modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=T=>r.value=T),onChange:p,"format-tooltip":f},null,8,["modelValue"])])}}});var Te=A(be,[["__scopeId","data-v-dd282e38"]]);const xe={class:"current-play"},Pe={class:"right"},we={class:"title"},$e={class:"author"},ke=k({setup(e){const t=C(),{curSongPicUrl:s,curSongTitle:l,curSongAuthor:o}=V(t);return(n,r)=>{const p=v("el-image");return y(),b("div",xe,[a(p,{src:i(s)},null,8,["src"]),d("div",Pe,[d("div",we,w(i(l)),1),d("div",$e,w(i(o)),1)])])}}});var Ce=A(ke,[["__scopeId","data-v-93dfd6fe"]]);const Le=e=>(ee("data-v-c439c642"),e=e(),te(),e),Ee={class:"global-playlist"},De={key:0},Ve=["onClick"],Ae={class:"title"},Ue={class:"author"},Be=Le(()=>d("i",{class:"iconfont icon-24gf-playlistMusic2"},null,-1)),Fe=k({setup(e){const t=C(),{playlist:s,curSongId:l}=V(t);return(o,n)=>{const r=v("el-empty"),p=v("el-button"),f=v("el-popover");return y(),b("div",Ee,[a(f,{placement:"top",width:200,trigger:"click",teleported:!1},{reference:m(()=>[a(p,{type:"text"},{icon:m(()=>[Be]),_:1})]),default:m(()=>[i(s).length?(y(),b("div",De,[(y(!0),b(j,null,Z(i(s),h=>(y(),b("div",{class:K(["playlist-item",{playing:i(l)===h.id}]),onClick:S=>i(t).setSongId(h.id)},[d("div",Ae,w(h.name),1),d("div",Ue,w(h.author),1)],10,Ve))),256))])):(y(),z(r,{key:1}))]),_:1})])}}});var Re=A(Fe,[["__scopeId","data-v-c439c642"]]);const le=e=>(ee("data-v-df9b2406"),e=e(),te(),e),qe={class:"bottom-toolbox"},Ne={class:"wrapper"},Oe={class:"center-control"},Ge={class:"time-progress"},Me=le(()=>d("span",{class:"iconfont icon-24gf-previous"},null,-1)),ze=le(()=>d("span",{class:"iconfont icon-24gf-next"},null,-1)),Ke={class:"volume"},He=k({setup(e){const t=C(),{curTime:s,totalTime:l,volume:o,isGlobalShow:n,isPlaying:r,muted:p,curPlaylistIndex:f,playlist:h}=V(t),S=Q(()=>O(s.value+"")),u=Q(()=>O(l.value+"")),T=()=>{console.log("\u663E\u793A"),n.value=!n.value},g=()=>{r.value=!r.value},c=x(0);c.value=o.value*100;const _=()=>{t.setVolume(c.value/100)};return(R,I)=>{const B=v("el-button"),q=v("el-link"),$=v("el-slider");return y(),b("div",qe,[a(Te),d("div",Ne,[a(Ce),d("div",Oe,[d("div",Ge,w(i(S))+" / "+w(i(u)),1),a(B,{type:"text",onClick:i(t).previousSong,disabled:!i(f)},{icon:m(()=>[Me]),_:1},8,["onClick","disabled"]),a(B,{class:"play-button",type:"primary",circle:"",onClick:g},{icon:m(()=>[d("span",{class:K(["iconfont",i(t).isPlaying?"icon-24gf-pause2":"icon-24gf-play"])},null,2)]),_:1}),a(B,{type:"text",onClick:i(t).nextSong,disabled:i(f)>=i(h).length-1},{icon:m(()=>[ze]),_:1},8,["onClick","disabled"]),a(q,{onClick:T},{default:m(()=>[oe(w(i(n)?"\u6536\u8D77":"\u5C55\u5F00"),1)]),_:1})]),d("div",Ke,[d("i",{class:K(["iconfont",c.value&&!i(p)?"icon-24gf-volumeMiddle":"icon-24gf-volumeDisable"]),onClick:I[0]||(I[0]=N=>i(t).setMuted(!i(p)))},null,2),a($,{modelValue:c.value,"onUpdate:modelValue":I[1]||(I[1]=N=>c.value=N),onInput:_},null,8,["modelValue"])]),a(Re)])])}}});var je=A(He,[["__scopeId","data-v-df9b2406"]]);const W=re.create({baseURL:"/api",timeout:2e4});W.interceptors.request.use(e=>{const t=localStorage.getItem("token");return console.log(t),t&&(console.log("\u8BF7\u6C42\u5934\u4E0D\u4E3A\u7A7A"),console.log(e),e.headers.token=t),e},e=>Promise.reject(e));W.interceptors.response.use(e=>(e.data.code,e),e=>Promise.reject(e));const U=async e=>{const{data:t}=await W.request(e);return console.log(t),t},We=e=>U({url:"/top/playlist",method:"get",params:e}),Je=e=>U({url:"/search",method:"get",params:e}),Qe=e=>U({url:"/search/default",method:"get",params:e}),Xe=e=>U({url:"/search/suggest",method:"get",params:e}),Ye=e=>U({url:"/song/url",method:"get",params:e}),Ze=e=>U({url:"/song/detail",method:"get",params:e}),et=e=>U({url:"/lyric",method:"get",params:e}),tt=e=>U({url:"/playlist/detail",method:"get",params:e});var G={getTopPlaylist:We,searchSong:Je,getSearchDefault:Qe,searchSuggest:Xe,searchUrl:Ye,getSongDetail:Ze,getLyric:et,getPlaylist:tt};const ot={class:"search"},st=["onClick"],nt=k({setup(e){var T,g;const t=ce(),s=x(""),l=x(""),o=x("");s.value=((g=(T=t.query)==null?void 0:T.keywords)==null?void 0:g.toString())||"";const n=se();(async()=>{const c={},_=await G.getSearchDefault(c);_.code===200?(console.log(_.data),l.value=_.data.showKeyword,o.value=_.data.realkeyword):F.error(_.message)})();const p=async(c,_)=>{if(!c){_([]);return}const R={keywords:c},I=await G.searchSuggest(R);I.code===200?(console.log(I.result),_(I.result.songs)):F.error(I.message)},f=C(),{isGlobalShow:h}=V(f),S=c=>{if(h.value=!1,console.log("\u641C\u7D22name",c),!c){F.warning("\u65E0\u641C\u7D22\u5185\u5BB9");return}s.value||(s.value=c),n.push({name:"searchList",query:{keywords:c}})},u=c=>{if(console.log("\u641C\u7D22id",c),!c){F.warning("\u65E0\u5185\u5BB9");return}n.push({name:"songInfo",params:{id:c}})};return(c,_)=>{const R=v("el-autocomplete"),I=v("el-col"),B=v("el-button"),q=v("el-row");return y(),b("div",ot,[a(q,null,{default:m(()=>[a(I,{span:22},{default:m(()=>[a(R,{modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=$=>s.value=$),placeholder:l.value,"fetch-suggestions":p,onKeyup:_[1]||(_[1]=ie($=>S(s.value||o.value),["enter"]))},{default:m(({item:$})=>[d("div",{onClick:N=>u($.id)},w($.name),9,st)]),_:1},8,["modelValue","placeholder"])]),_:1}),a(I,{span:2},{default:m(()=>[a(B,{icon:i(ue),circle:"",onClick:_[2]||(_[2]=$=>S(s.value||o.value))},null,8,["icon"])]),_:1})]),_:1})])}}});var lt=A(nt,[["__scopeId","data-v-37b581d3"]]);const at=oe("\u8FD9\u662F\u5934\u90E8"),rt=k({setup(e){const t=C(),s=()=>{console.log("\u767B\u5F55")},l=()=>{console.log("\u9000\u51FA\u767B\u5F55")},o=se(),n=()=>{o.push({name:"home"})};return(r,p)=>{const f=v("el-button"),h=v("el-col"),S=v("el-avatar"),u=v("el-dropdown-item"),T=v("el-dropdown-menu"),g=v("el-dropdown"),c=v("el-header");return y(),z(c,null,{default:m(()=>[a(h,{span:8},{default:m(()=>[a(f,{onClick:n,type:"text",style:{color:"#fff"}},{default:m(()=>[at]),_:1})]),_:1}),a(h,{span:8},{default:m(()=>[a(lt)]),_:1}),a(h,{style:{"text-align":"right"},span:8},{default:m(()=>[i(t).isLogin?(y(),z(g,{key:1},{dropdown:m(()=>[a(T,null,{default:m(()=>[a(u,null,{default:m(()=>[d("span",{onClick:l},"\u9000\u51FA\u767B\u5F55")]),_:1})]),_:1})]),default:m(()=>[a(S,{size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"})]),_:1})):(y(),z(S,{key:0,onClick:s,size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}))]),_:1})]),_:1})}}});const ct={class:"lyric-area"},it=k({setup(e){const t=C(),{curSongId:s,curTime:l,isPlaying:o}=V(t);let n=x([]);const r=x(),p=x();H(()=>{var u;(u=p.value)==null||u.scrollIntoView()});const f=async u=>{const T={id:u},g=await G.getLyric(T);g.code===200?(console.log(g),n.value=g.lrc.lyric.split(`
`).filter(c=>c).map(c=>{const _=c.match(/^\[(.*)\:(.*)\.(.*)\]/);return{lyric:c.replace(/\[.*\]/,""),time:c.match(/\[(.*)\]/)&&c.match(/\[(.*)\]/)[1]||"",duration:_?Number(_[1])*60+Number(_[2])*1+Number(_[3])*.001:0}}),t.setLyric(n.value)):F.error(g.message)},h=x(0);E(l,()=>{h.value=n.value.filter(u=>u.duration<l.value).length-1,console.log(h.value)}),E(o,()=>{var u;o.value&&((u=p.value)==null||u.scrollIntoView({block:"center",behavior:"smooth"}))}),ne(()=>{var u;(u=p.value)==null||u.scrollIntoView({block:"center",behavior:"smooth"})}),H(()=>{var u;(u=r.value)==null||u.addEventListener}),s.value&&f(s.value);const S=u=>u.replace(/\[.*\]/,"");return E(s,()=>{f(s.value)}),(u,T)=>(y(),b("div",ct,[d("div",{ref_key:"lyricRef",ref:r,class:"lyric"},[(y(!0),b(j,null,Z(i(n),(g,c)=>(y(),b("p",{ref_for:!0,ref:_=>{h.value===c&&(p.value=_)},class:K({current:h.value===c})},w(S(g.lyric)),3))),256))],512)]))}});var ut=A(it,[["__scopeId","data-v-153e7d5d"]]);const _t={class:"sim-audio"},dt=["src"],pt=k({setup(e){const t=C(),{curSongId:s,curSongTitle:l,curSongAuthor:o,curSongUrl:n,isPlaying:r,changeTime:p,volume:f,muted:h,curSongPicUrl:S,curPlaylistIndex:u,playlist:T}=V(t),g=x(),c=()=>{console.log(g.value),r.value?g.value.play():g.value.pause(),console.log("\u6B63\u5728\u64AD\u653E\u662F"+r.value)};E(r,()=>{X(()=>{c()})}),E(h,()=>{g.value.muted=h.value}),E(f,()=>(console.log(f.value),t.setMuted(!1),g.value.volume=f.value)),H(()=>{g.value.volume=f.value}),E(p,()=>{g.value.currentTime=p.value}),ne(()=>{console.log(n.value)}),E(s,async()=>{console.log(s.value),localStorage.setItem("curSongId",s.value+"");const P=await R(s.value);if(P)t.setSongUrl(P);else{const L=`https://music.163.com/song/media/outer/url?id=${s.value}.mp3`;t.setSongUrl(L)}_()});const _=async()=>{console.log("\u83B7\u53D6\u8BE6\u60C5");const P={ids:s.value},L=await G.getSongDetail(P);if(L.code===200){console.log(L);const D=L.songs[0];I(D)}else F.error(L.message)},R=async P=>{var J;console.log("\u83B7\u53D6\u8BE6\u60C5");const L={id:s.value},D=await G.searchUrl(L);if(D.code===200)return console.log(D),((J=D.data[0])==null?void 0:J.url)||"";F.error(D.message)},I=async P=>{console.log(P.id),console.log(s.value),l.value=P.name,o.value=P.ar[0].name,S.value=P.al.picUrl,t.setPlaylist({id:s.value,name:l.value,author:o.value}),t.setIsPlaying(!1),X(()=>{t.setIsPlaying(!0)})};t.setSongId(Number(localStorage.getItem("curSongId")));const B=()=>{console.log("emptied"),t.setIsPlaying(!1)},q=()=>{console.log("canplay"),t.setTotalTime(g.value.duration)},$=()=>{console.log("ended")},N=()=>{console.log("timeupdate"),t.setCurTime(g.value.currentTime)};return(P,L)=>(y(),b("div",_t,[d("audio",{ref:D=>{g.value=D},src:i(n),onCanplay:q,onEnded:$,onTimeupdate:N,onEmptied:B},null,40,dt)]))}});const gt={class:"global-player"},mt={class:"info"},vt={class:"left"},ht={class:"circle"},ft={class:"song-info"},yt={class:"title"},St={class:"author"},It={class:"right"},bt=k({setup(e){const t=C(),{curSongTitle:s,curSongAuthor:l,curSongPicUrl:o}=V(t);return(n,r)=>{const p=v("el-image");return y(),b("div",gt,[d("div",{class:"background",style:_e({backgroundImage:`url(${i(o)})`})},null,4),a(pt),d("div",mt,[d("div",vt,[d("div",ht,[a(p,{src:i(o)},null,8,["src"])]),d("div",ft,[d("p",yt,w(i(s)),1),d("p",St,w(i(l)),1)])]),d("div",It,[a(ut)])])])}}});var Tt=A(bt,[["__scopeId","data-v-1565cbe8"]]);const xt=k({setup(e){const t=C();return(s,l)=>{const o=v("router-view"),n=v("el-main"),r=v("el-footer"),p=v("el-container");return y(),b(j,null,[a(p,null,{default:m(()=>[a(rt),a(n,null,{default:m(()=>[a(o)]),_:1}),a(r,null,{default:m(()=>[a(je)]),_:1})]),_:1}),a(ge,{name:"move"},{default:m(()=>[de(a(Tt,null,null,512),[[pe,i(t).isGlobalShow]])]),_:1})],64)}}});var Pt=A(xt,[["__scopeId","data-v-1dc5e242"]]);const wt="modulepreload",Y={},$t="/vue-music/",M=function(t,s){return!s||s.length===0?t():Promise.all(s.map(l=>{if(l=`${$t}${l}`,l in Y)return;Y[l]=!0;const o=l.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${n}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":wt,o||(r.as="script",r.crossOrigin=""),r.href=l,document.head.appendChild(r),o)return new Promise((p,f)=>{r.addEventListener("load",p),r.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t())},kt=[{name:"home",path:"/",component:()=>M(()=>import("./Home.b6d4ea27.js"),["assets/Home.b6d4ea27.js","assets/Home.711b6d18.css","assets/vendor.b4a3d6d4.js"])},{name:"searchList",path:"/searchList",component:()=>M(()=>import("./SearchList.39bca7ec.js"),["assets/SearchList.39bca7ec.js","assets/SearchList.8ae46d57.css","assets/vendor.b4a3d6d4.js"])},{name:"songInfo",path:"/songInfo/:id",component:()=>M(()=>import("./SongInfo.90487b59.js"),["assets/SongInfo.90487b59.js","assets/SongInfo.888fbf59.css","assets/vendor.b4a3d6d4.js"])},{name:"playlist",path:"/playlist/:id",component:()=>M(()=>import("./Playlist.dce56f12.js"),["assets/Playlist.dce56f12.js","assets/Playlist.27d6f0bc.css","assets/vendor.b4a3d6d4.js"])}],Ct=me({history:ve(),routes:kt});const Lt=he(Pt);Lt.use(fe).use(ye()).use(Ct).mount("#app");export{A as _,G as s,C as u};
