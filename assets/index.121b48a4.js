import{d as ae,a as k,r as x,s as A,w as E,b as v,o as y,c as b,e as a,u as i,f as _,t as w,g,F as j,h as Z,n as K,i as z,p as ee,j as te,k as Q,l as oe,m as re,q as ce,v as se,x as ie,y as ue,E as R,z as H,A as ne,B as X,C as de,D as _e,G as pe,T as me,H as ge,I as ve,J as he,K as fe,L as ye}from"./vendor.b4a3d6d4.js";const Se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};Se();const C=ae("main",{state:()=>({isGlobalShow:!1,isPlaying:!1,isLogin:!1,curSongId:0,curSongTitle:"",curSongAuthor:"",curSongUrl:"",curSongPicUrl:"",changeTime:0,curTime:0,totalTime:0,volume:.1,muted:!1,lyric:[{lyric:"",time:"",duration:0}],rotateAngle:0,playlist:[],curPlaylistIndex:0}),getters:{},actions:{setSongId(e){this.curSongId=e},setIsPlaying(e){this.isPlaying=e},setChangeTime(e){this.changeTime=e},setTotalTime(e){this.totalTime=e},setCurTime(e){this.curTime=e},setSongUrl(e){this.curSongUrl=e},setVolume(e){this.volume=e},setLyric(e){this.lyric=e},setMuted(e){this.muted=e},setPlaylist(e){~this.playlist.findIndex(s=>s.id===e.id)||(this.curPlaylistIndex=this.playlist.length,this.playlist.push(e))},previousSong(){this.curPlaylistIndex--,this.setSongId(this.playlist[this.curPlaylistIndex].id)},nextSong(){this.curPlaylistIndex++,this.setSongId(this.playlist[this.curPlaylistIndex].id)}}});function O(e){let t=parseInt(e),s=0,l=0;t>60&&(s=parseInt((t/60).toString()),t=parseInt((t%60).toString()),s>60&&(l=parseInt((s/60).toString()),s=60));let o="";return parseInt(t.toString())<10?o="0:0"+parseInt(t.toString()):o="0:"+parseInt(t.toString()),s>0&&(parseInt(t.toString())<10?o="0"+parseInt(t.toString()):o=parseInt(t.toString()).toString(),o=parseInt(s.toString())+":"+o),l>0&&(parseInt(t.toString())<10?o="0"+parseInt(t.toString()):o=parseInt(t.toString()).toString(),o=parseInt(l.toString())+":"+parseInt(s.toString())+":"+o),o}var V=(e,t)=>{const s=e.__vccOpts||e;for(const[l,o]of t)s[l]=o;return s};const Ie={class:"progress"},be=k({setup(e){const t=C(),s=x("00:00"),l=x("00:00"),{curTime:o,totalTime:n}=A(t),r=x(0);E(o,()=>{s.value=O(o.value+""),l.value=O(n.value+""),r.value=o.value/n.value*100});const p=()=>{t.setChangeTime(n.value*(r.value*.01))},f=h=>O(n.value*(h*.01)+"");return(h,S)=>{const u=v("el-slider");return y(),b("div",Ie,[a(u,{modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=T=>r.value=T),onChange:p,"format-tooltip":f},null,8,["modelValue"])])}}});var Te=V(be,[["__scopeId","data-v-dd282e38"]]);const xe={class:"current-play"},Pe={class:"right"},we={class:"title"},$e={class:"author"},ke=k({setup(e){const t=C(),{curSongPicUrl:s,curSongTitle:l,curSongAuthor:o}=A(t);return(n,r)=>{const p=v("el-image");return y(),b("div",xe,[a(p,{src:i(s)},null,8,["src"]),_("div",Pe,[_("div",we,w(i(l)),1),_("div",$e,w(i(o)),1)])])}}});var Ce=V(ke,[["__scopeId","data-v-93dfd6fe"]]);const Le=e=>(ee("data-v-c439c642"),e=e(),te(),e),Ee={class:"global-playlist"},De={key:0},Ae=["onClick"],Ve={class:"title"},Ue={class:"author"},Be=Le(()=>_("i",{class:"iconfont icon-24gf-playlistMusic2"},null,-1)),Re=k({setup(e){const t=C(),{playlist:s,curSongId:l}=A(t);return(o,n)=>{const r=v("el-empty"),p=v("el-button"),f=v("el-popover");return y(),b("div",Ee,[a(f,{placement:"top",width:200,trigger:"click",teleported:!1},{reference:g(()=>[a(p,{type:"text"},{icon:g(()=>[Be]),_:1})]),default:g(()=>[i(s).length?(y(),b("div",De,[(y(!0),b(j,null,Z(i(s),h=>(y(),b("div",{class:K(["playlist-item",{playing:i(l)===h.id}]),onClick:S=>i(t).setSongId(h.id)},[_("div",Ve,w(h.name),1),_("div",Ue,w(h.author),1)],10,Ae))),256))])):(y(),z(r,{key:1}))]),_:1})])}}});var Fe=V(Re,[["__scopeId","data-v-c439c642"]]);const le=e=>(ee("data-v-df9b2406"),e=e(),te(),e),qe={class:"bottom-toolbox"},Ne={class:"wrapper"},Oe={class:"center-control"},Ge={class:"time-progress"},Me=le(()=>_("span",{class:"iconfont icon-24gf-previous"},null,-1)),ze=le(()=>_("span",{class:"iconfont icon-24gf-next"},null,-1)),Ke={class:"volume"},He=k({setup(e){const t=C(),{curTime:s,totalTime:l,volume:o,isGlobalShow:n,isPlaying:r,muted:p,curPlaylistIndex:f,playlist:h}=A(t),S=Q(()=>O(s.value+"")),u=Q(()=>O(l.value+"")),T=()=>{console.log("\u663E\u793A"),n.value=!n.value},m=()=>{r.value=!r.value},c=x(0);c.value=o.value*100;const d=()=>{t.setVolume(c.value/100)};return(F,I)=>{const B=v("el-button"),q=v("el-link"),$=v("el-slider");return y(),b("div",qe,[a(Te),_("div",Ne,[a(Ce),_("div",Oe,[_("div",Ge,w(i(S))+" / "+w(i(u)),1),a(B,{type:"text",onClick:i(t).previousSong,disabled:!i(f)},{icon:g(()=>[Me]),_:1},8,["onClick","disabled"]),a(B,{class:"play-button",type:"primary",circle:"",onClick:m},{icon:g(()=>[_("span",{class:K(["iconfont",i(t).isPlaying?"icon-24gf-pause2":"icon-24gf-play"])},null,2)]),_:1}),a(B,{type:"text",onClick:i(t).nextSong,disabled:i(f)>=i(h).length-1},{icon:g(()=>[ze]),_:1},8,["onClick","disabled"]),a(q,{onClick:T},{default:g(()=>[oe(w(i(n)?"\u6536\u8D77":"\u5C55\u5F00"),1)]),_:1})]),_("div",Ke,[_("i",{class:K(["iconfont",c.value&&!i(p)?"icon-24gf-volumeMiddle":"icon-24gf-volumeDisable"]),onClick:I[0]||(I[0]=N=>i(t).setMuted(!i(p)))},null,2),a($,{modelValue:c.value,"onUpdate:modelValue":I[1]||(I[1]=N=>c.value=N),onInput:d},null,8,["modelValue"])]),a(Fe)])])}}});var je=V(He,[["__scopeId","data-v-df9b2406"]]);const We="https://netease-cloud-music-api-dun-nu.vercel.app",W=re.create({baseURL:We,timeout:2e4});W.interceptors.request.use(e=>{const t=localStorage.getItem("token");return console.log(t),t&&(console.log("\u8BF7\u6C42\u5934\u4E0D\u4E3A\u7A7A"),console.log(e),e.headers.token=t),e},e=>Promise.reject(e));W.interceptors.response.use(e=>(e.data.code,e),e=>Promise.reject(e));const U=async e=>{const{data:t}=await W.request(e);return console.log(t),t},Je=e=>U({url:"/top/playlist",method:"get",params:e}),Qe=e=>U({url:"/search",method:"get",params:e}),Xe=e=>U({url:"/search/default",method:"get",params:e}),Ye=e=>U({url:"/search/suggest",method:"get",params:e}),Ze=e=>U({url:"/song/url",method:"get",params:e}),et=e=>U({url:"/song/detail",method:"get",params:e}),tt=e=>U({url:"/lyric",method:"get",params:e}),ot=e=>U({url:"/playlist/detail",method:"get",params:e});var G={getTopPlaylist:Je,searchSong:Qe,getSearchDefault:Xe,searchSuggest:Ye,searchUrl:Ze,getSongDetail:et,getLyric:tt,getPlaylist:ot};const st={class:"search"},nt=["onClick"],lt=k({setup(e){var T,m;const t=ce(),s=x(""),l=x(""),o=x("");s.value=((m=(T=t.query)==null?void 0:T.keywords)==null?void 0:m.toString())||"";const n=se();(async()=>{const c={},d=await G.getSearchDefault(c);d.code===200?(console.log(d.data),l.value=d.data.showKeyword,o.value=d.data.realkeyword):R.error(d.message)})();const p=async(c,d)=>{if(!c){d([]);return}const F={keywords:c},I=await G.searchSuggest(F);I.code===200?(console.log(I.result),d(I.result.songs)):R.error(I.message)},f=C(),{isGlobalShow:h}=A(f),S=c=>{if(h.value=!1,console.log("\u641C\u7D22name",c),!c){R.warning("\u65E0\u641C\u7D22\u5185\u5BB9");return}s.value||(s.value=c),n.push({name:"searchList",query:{keywords:c}})},u=c=>{if(console.log("\u641C\u7D22id",c),!c){R.warning("\u65E0\u5185\u5BB9");return}n.push({name:"songInfo",params:{id:c}})};return(c,d)=>{const F=v("el-autocomplete"),I=v("el-col"),B=v("el-button"),q=v("el-row");return y(),b("div",st,[a(q,null,{default:g(()=>[a(I,{span:22},{default:g(()=>[a(F,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=$=>s.value=$),placeholder:l.value,"fetch-suggestions":p,onKeyup:d[1]||(d[1]=ie($=>S(s.value||o.value),["enter"]))},{default:g(({item:$})=>[_("div",{onClick:N=>u($.id)},w($.name),9,nt)]),_:1},8,["modelValue","placeholder"])]),_:1}),a(I,{span:2},{default:g(()=>[a(B,{icon:i(ue),circle:"",onClick:d[2]||(d[2]=$=>S(s.value||o.value))},null,8,["icon"])]),_:1})]),_:1})])}}});var at=V(lt,[["__scopeId","data-v-37b581d3"]]);const rt=oe("\u8FD9\u662F\u5934\u90E8"),ct=k({setup(e){const t=C(),s=()=>{console.log("\u767B\u5F55")},l=()=>{console.log("\u9000\u51FA\u767B\u5F55")},o=se(),n=()=>{o.push({name:"home"})};return(r,p)=>{const f=v("el-button"),h=v("el-col"),S=v("el-avatar"),u=v("el-dropdown-item"),T=v("el-dropdown-menu"),m=v("el-dropdown"),c=v("el-header");return y(),z(c,null,{default:g(()=>[a(h,{span:8},{default:g(()=>[a(f,{onClick:n,type:"text",style:{color:"#fff"}},{default:g(()=>[rt]),_:1})]),_:1}),a(h,{span:8},{default:g(()=>[a(at)]),_:1}),a(h,{style:{"text-align":"right"},span:8},{default:g(()=>[i(t).isLogin?(y(),z(m,{key:1},{dropdown:g(()=>[a(T,null,{default:g(()=>[a(u,null,{default:g(()=>[_("span",{onClick:l},"\u9000\u51FA\u767B\u5F55")]),_:1})]),_:1})]),default:g(()=>[a(S,{size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"})]),_:1})):(y(),z(S,{key:0,onClick:s,size:40,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}))]),_:1})]),_:1})}}});const it={class:"lyric-area"},ut=k({setup(e){const t=C(),{curSongId:s,curTime:l,isPlaying:o}=A(t);let n=x([]);const r=x(),p=x();H(()=>{var u;(u=p.value)==null||u.scrollIntoView()});const f=async u=>{const T={id:u},m=await G.getLyric(T);m.code===200?(console.log(m),n.value=m.lrc.lyric.split(`
`).filter(c=>c).map(c=>{const d=c.match(/^\[(.*)\:(.*)\.(.*)\]/);return{lyric:c.replace(/\[.*\]/,""),time:c.match(/\[(.*)\]/)&&c.match(/\[(.*)\]/)[1]||"",duration:d?Number(d[1])*60+Number(d[2])*1+Number(d[3])*.001:0}}),t.setLyric(n.value)):R.error(m.message)},h=x(0);E(l,()=>{h.value=n.value.filter(u=>u.duration<l.value).length-1,console.log(h.value)}),E(o,()=>{var u;o.value&&((u=p.value)==null||u.scrollIntoView({block:"center",behavior:"smooth"}))}),ne(()=>{var u;(u=p.value)==null||u.scrollIntoView({block:"center",behavior:"smooth"})}),H(()=>{var u;(u=r.value)==null||u.addEventListener}),s.value&&f(s.value);const S=u=>u.replace(/\[.*\]/,"");return E(s,()=>{f(s.value)}),(u,T)=>(y(),b("div",it,[_("div",{ref_key:"lyricRef",ref:r,class:"lyric"},[(y(!0),b(j,null,Z(i(n),(m,c)=>(y(),b("p",{ref_for:!0,ref:d=>{h.value===c&&(p.value=d)},class:K({current:h.value===c})},w(S(m.lyric)),3))),256))],512)]))}});var dt=V(ut,[["__scopeId","data-v-153e7d5d"]]);const _t={class:"sim-audio"},pt=["src"],mt=k({setup(e){const t=C(),{curSongId:s,curSongTitle:l,curSongAuthor:o,curSongUrl:n,isPlaying:r,changeTime:p,volume:f,muted:h,curSongPicUrl:S,curPlaylistIndex:u,playlist:T}=A(t),m=x(),c=()=>{console.log(m.value),r.value?m.value.play():m.value.pause(),console.log("\u6B63\u5728\u64AD\u653E\u662F"+r.value)};E(r,()=>{X(()=>{c()})}),E(h,()=>{m.value.muted=h.value}),E(f,()=>(console.log(f.value),t.setMuted(!1),m.value.volume=f.value)),H(()=>{m.value.volume=f.value}),E(p,()=>{m.value.currentTime=p.value}),ne(()=>{console.log(n.value)}),E(s,async()=>{console.log(s.value),localStorage.setItem("curSongId",s.value+"");const P=await F(s.value);if(P)t.setSongUrl(P);else{const L=`https://music.163.com/song/media/outer/url?id=${s.value}.mp3`;t.setSongUrl(L)}d()});const d=async()=>{console.log("\u83B7\u53D6\u8BE6\u60C5");const P={ids:s.value},L=await G.getSongDetail(P);if(L.code===200){console.log(L);const D=L.songs[0];I(D)}else R.error(L.message)},F=async P=>{var J;console.log("\u83B7\u53D6\u8BE6\u60C5");const L={id:s.value},D=await G.searchUrl(L);if(D.code===200)return console.log(D),((J=D.data[0])==null?void 0:J.url)||"";R.error(D.message)},I=async P=>{console.log(P.id),console.log(s.value),l.value=P.name,o.value=P.ar[0].name,S.value=P.al.picUrl,t.setPlaylist({id:s.value,name:l.value,author:o.value}),t.setIsPlaying(!1),X(()=>{t.setIsPlaying(!0)})};t.setSongId(Number(localStorage.getItem("curSongId")));const B=()=>{console.log("emptied"),t.setIsPlaying(!1)},q=()=>{console.log("canplay"),t.setTotalTime(m.value.duration)},$=()=>{console.log("ended")},N=()=>{console.log("timeupdate"),t.setCurTime(m.value.currentTime)};return(P,L)=>(y(),b("div",_t,[_("audio",{ref:D=>{m.value=D},src:i(n),onCanplay:q,onEnded:$,onTimeupdate:N,onEmptied:B},null,40,pt)]))}});const gt={class:"global-player"},vt={class:"info"},ht={class:"left"},ft={class:"circle"},yt={class:"song-info"},St={class:"title"},It={class:"author"},bt={class:"right"},Tt=k({setup(e){const t=C(),{curSongTitle:s,curSongAuthor:l,curSongPicUrl:o}=A(t);return(n,r)=>{const p=v("el-image");return y(),b("div",gt,[_("div",{class:"background",style:de({backgroundImage:`url(${i(o)})`})},null,4),a(mt),_("div",vt,[_("div",ht,[_("div",ft,[a(p,{src:i(o)},null,8,["src"])]),_("div",yt,[_("p",St,w(i(s)),1),_("p",It,w(i(l)),1)])]),_("div",bt,[a(dt)])])])}}});var xt=V(Tt,[["__scopeId","data-v-1565cbe8"]]);const Pt=k({setup(e){const t=C();return(s,l)=>{const o=v("router-view"),n=v("el-main"),r=v("el-footer"),p=v("el-container");return y(),b(j,null,[a(p,null,{default:g(()=>[a(ct),a(n,null,{default:g(()=>[a(o)]),_:1}),a(r,null,{default:g(()=>[a(je)]),_:1})]),_:1}),a(me,{name:"move"},{default:g(()=>[_e(a(xt,null,null,512),[[pe,i(t).isGlobalShow]])]),_:1})],64)}}});var wt=V(Pt,[["__scopeId","data-v-1dc5e242"]]);const $t="modulepreload",Y={},kt="/vue-music/",M=function(t,s){return!s||s.length===0?t():Promise.all(s.map(l=>{if(l=`${kt}${l}`,l in Y)return;Y[l]=!0;const o=l.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${n}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":$t,o||(r.as="script",r.crossOrigin=""),r.href=l,document.head.appendChild(r),o)return new Promise((p,f)=>{r.addEventListener("load",p),r.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t())},Ct=[{name:"home",path:"/",component:()=>M(()=>import("./Home.9a49df7f.js"),["assets/Home.9a49df7f.js","assets/Home.711b6d18.css","assets/vendor.b4a3d6d4.js"])},{name:"searchList",path:"/searchList",component:()=>M(()=>import("./SearchList.aa1680c6.js"),["assets/SearchList.aa1680c6.js","assets/SearchList.8ae46d57.css","assets/vendor.b4a3d6d4.js"])},{name:"songInfo",path:"/songInfo/:id",component:()=>M(()=>import("./SongInfo.dce64b74.js"),["assets/SongInfo.dce64b74.js","assets/SongInfo.888fbf59.css","assets/vendor.b4a3d6d4.js"])},{name:"playlist",path:"/playlist/:id",component:()=>M(()=>import("./Playlist.71246bbe.js"),["assets/Playlist.71246bbe.js","assets/Playlist.27d6f0bc.css","assets/vendor.b4a3d6d4.js"])}],Lt=ge({history:ve(),routes:Ct});const Et=he(wt);Et.use(fe).use(ye()).use(Lt).mount("#app");export{V as _,G as s,C as u};
